function arm_remove_cover(){var e=jQuery("#armRemoveCover").parents(".arm_template_container"),a=jQuery("#armRemoveCover").attr("data-cover"),r=jQuery("#armRemoveCover").attr("data-default-cover");""!=a&&(e.css("opacity","0.5"),jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_remove_uploaded_file&file_name="+a+"&type=profile_cover",success:function(){r=jQuery("#armRemoveCover").attr("data-default-cover"),e.css("opacity","1"),jQuery(".arm_profile_picture_block").css("background-image","url("+r+"?"+Math.floor(100*Math.random())+")"),jQuery("#armRemoveCover").hide(),jQuery(".arm_delete_cover_popup").removeClass("armopen").slideUp()}}))}function arm_remove_profile(){var e=jQuery("#armRemoveProfilePic").attr("data-cover"),a=jQuery("#armRemoveProfilePic").parents(".arm_user_avatar").find("img");""!=e&&(a.css("opacity","0.5"),jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_remove_uploaded_file&file_name="+e+"&type=profile_pic",success:function(e){jQuery(".arm_delete_profile_popup").removeClass("armopen").slideUp(),a.attr("src",e),jQuery(".arm_profile_detail_tbl").find(".arm_user_avatar").find("img").attr("src",e);var r=e.split("/"),t=Object.keys(r).length,i=r[t-1];return jQuery("#armRemoveProfilePic").attr("data-cover",i),a.parent().find("#armRemoveProfilePic").attr("data-cover",i),a.parent().find("#armRemoveProfilePic").hide(),jQuery("#armRemoveProfilePic").parent().hide(),jQuery("#armRemoveProfilePic").parent().addClass("arm_no_profile"),jQuery("#armRemoveProfilePic").hide(),!1}}))}function hideConfirmBoxCallbackprofile(){jQuery(".arm_delete_profile_popup").removeClass("armopen").slideUp()}function RandomString(e){for(var a=void 0!=e&&0!=e?e:5,r="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;a>i;i++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}jQuery(document).ready(function(){function e(e){for(var a=void 0!=e&&0!=e?e:5,r="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;a>i;i++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}function a(e,a){var r=jQuery(e).parents(".armFileUploadWrapper").find(".armFileMessages").attr("id");if(void 0!=r){var t=document.getElementById(r);t.innerHTML=a}}function r(e){e.stopPropagation(),e.preventDefault();var a=e.target;"dragover"==e.type?jQuery(a).parents(".armFileDragArea").addClass("arm_dragover"):jQuery(a).parents(".armFileDragArea").removeClass("arm_dragover")}function t(e){r(e);var t=e.target,n="";return n=void 0===t.files?t&&t.value?[{name:t.value.replace(/^.+\\/,"")}]:[]:t.files,n.length>1?(invalid_msg=fileUploadErrorMultiple,a(t,"<div class='arm_error_msg' style='opacity: 1;'><div class='arm_error_box_arrow'></div>"+invalid_msg+"</div>"),!1):void("null"!=n&&"undefined"!=typeof n&&jQuery.each(n,function(e,a){i(a,t),o(a,t)}))}function i(e,r){var t=jQuery(r),i=t.parents(".armFileUploadWrapper"),o=i.find(".armFileDragArea"),n=t.attr("data-file_type"),d=t.attr("data-file_size"),l=t.attr("data-avatar-type"),s=1024*d*1024;if("cover"===l&&"profile"===l)var c=["php","php3","php4","php5","pl","py","jsp","asp","exe","cgi","gif","GIF"];else var c=["php","php3","php4","php5","pl","py","jsp","asp","exe","cgi"];var p=e.name.lastIndexOf("."),u=e.name.substring(p+1);u=u.toLowerCase();var m=t.attr("data-msg-invalid");if(void 0==m&&(m=invalidFileTypeError),e.size>s)return!1;if(c.indexOf(u)>-1)return a(r,"<div class='arm_error_msg' style='opacity: 1;'><div class='arm_error_box_arrow'></div>"+m+"</div>"),t.val(""),t.attr("value",""),t.trigger("change"),!1;var f=t.attr("accept"),h=[];if(void 0!=f&&(h=f.replace(/\./g,"").split(","),-1==jQuery.inArray(u,h)))return a(r,"<div class='arm_error_msg' style='opacity: 1;'><div class='arm_error_box_arrow'></div>"+m+"</div>"),t.val(""),t.attr("value",""),t.trigger("change"),!1;if(window.FileReader)if("badges"==n)i.find(".arm_old_file").html("");else if("social_icon"==n)i.find(".arm_old_file").html("");else if(0==e.type.indexOf("image")){var v=new FileReader;v.onload=function(e){var a='<div class="arm_uploaded_file_info" id="arm_uploaded_file_info" style="position:relative;">';a+='<img src="'+e.target.result+'"/>',a+="</div>",a+='<div class="armFileRemoveContainer">x</div>',i.find(".arm_old_file").html(a)},v.readAsDataURL(e)}else{var v=new FileReader;v.onload=function(){var a='<div class="arm_uploaded_file_info">';a+='<img src="'+__ARMIMAGEURL+'/file_icon.png"/>',a+='<span class="arm_uploaded_file_name">'+e.name+"</span>",a+="</div>",a+='<div class="armFileRemoveContainer">x</div>',i.find(".arm_old_file").html(a)},v.readAsDataURL(e)}else if("badges"==n)i.find(".arm_old_file").html("");else{var _="";i.find(".arm_old_file").html(_)}o.find(".armbar").css("width","0%").show(),o.find(".armFileDragAreaText").hide()}function o(r,t){var i=!0;s=jQuery(t);var o=s.attr("data-avatar-type");l=s.attr("data-update-meta");var n=(s.attr("class"),s.parents(".armFileUploadWrapper")),d=n.find(".armFileBtn"),p=n.find(".armFileUploadContainer"),u=n.find(".armFileDragArea"),m=n.find(".armFileRemoveContainer"),f=n.find(".armFileUploadProgressBar"),h=n.find(".armFileUploadProgressInfo"),v=s.parents("form").attr("data-random-id"),_=s.attr("data-file_size"),g=s.attr("data-file_type"),y=1024*_*1024;if("cover"===o&&"profile"===o)var w=["php","php3","php4","php5","pl","py","jsp","asp","exe","cgi","gif","GIF"];else var w=["php","php3","php4","php5","pl","py","jsp","asp","exe","cgi"];var b=new XMLHttpRequest,j=r.name.lastIndexOf("."),x=r.name.substring(j+1);x=x.toLowerCase();var M=s.attr("data-msg-invalid");void 0==M&&(M=invalidFileTypeError);var Q=s.attr("accept"),C=[];if(void 0!=Q&&(C=Q.replace(/\./g,"").split(","),-1===jQuery.inArray(x,C)))return"badges"!=g&&"social_icon"!=g||(a(t,"<span class='arm_error_msg error' style='opacity: 1;'>"+M+"</span>"),s.trigger("change")),!1;if(r.size>y){var R=M;return R=R.replace("{SIZE}",_+"MB"),R=R.replace("{size}",_+"MB"),setTimeout(function(){n.find(".arm_old_file").html(""),u.find(".armFileDragAreaText").show()},200),a(t,"<div class='arm_error_msg' style='opacity: 1;'><div class='arm_error_box_arrow'></div>"+R+"</div>"),s.val(""),s.attr("value",""),s.trigger("change"),!1}var A=new FileReader;return A.onload=function(l){var _=l.target.result,y=Base64.decode(_.replace(/data\:image\/(.*?)\;base64\,/,"")),j=new RegExp("<?php","g");if(0==r.type.indexOf("image")&&j.test(y))return a(t,"<div class='arm_error_msg' style='opacity: 1;'><div class='arm_error_box_arrow'></div> This file could not be processed due to security reason as this may contains malicious code.</div>"),s.val(""),s.attr("value",""),s.trigger("change"),jQuery(".arm_old_file.arm_field_file_display").html(""),jQuery("label.armFileDragAreaText").show(),!1;if(-1===jQuery.inArray(x,w))if(b.upload){var M=e(5),Q=r.name.lastIndexOf("."),C=r.name.substring(Q+1),R=/.*(?=\.)/.exec(r.name);if("badges"==g)var A="arm_badges_"+M+"_"+R;else if("social_icon"==g)var A="arm_icon_"+M+"_"+R;else var A="armFile"+M+"_"+R;var P=A.replace(/[^\w\s]/gi,"").replace(/ /g,"")+"."+C;f.show(),f.find(".armbar").css("width","0%"),u.find(".armbar").css("width","0%").show(),n.find(".armFileMessages").html(""),h.html(""),b.upload.addEventListener("progress",function(e){var a=parseFloat(0+e.loaded/e.total*100);a=Math.round(a),n.find(".armbar").css("width",a+"%"),f.find(".armbar").css("width",a+"%"),h.html('<span class="armFileName" style="float:left">'+P+'</span><span class="progressinfo_perc">'+a+"%</span>")},!1),b.addEventListener("load",function(){},!1),jQuery("#arm_form"+v).find(".arm_form_input_container_submit .arm_form_field_submit_button").attr("disabled","disabled"),n.find(".armFileDragArea").css("min-height","52px"),n.append('<div class="arm_loading_spinner_main" data_id="'+v+'"><div class="arm_loading_spinner"></div></div>');var L=new FormData;"badges"==g?(b.open("POST",__ARMAJAXURL,!0),L.append("action","arm_upload_badge")):"social_icon"==g?(b.open("POST",__ARMAJAXURL,!0),L.append("action","arm_upload_social_icon")):(b.open("POST",__ARMAJAXURL,!0),L.append("action","arm_upload_front")),b.setRequestHeader("X_FILENAME",P),b.setRequestHeader("X-FILENAME",P),L.append("armfileselect",r),b.send(L),i=!1,b.onreadystatechange=function(){if(4==b.readyState&&200==b.status){var e=b.responseText;if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://")){var r=e.split("://");e="//"+r[1]}if(jQuery("#arm_form"+v).find(".arm_form_input_container_submit .arm_form_field_submit_button").removeAttr("disabled"),n.find('.arm_loading_spinner_main[data_id="'+v+'"]').remove(),n.find("input.arm_file_url").attr("data-icon",P),n.find("input.arm_file_url").val(e).trigger("change"),n.find(".armUploadedFileName").val(P),n.find(".arm_image_file_preview").html('<img alt="Uploaded File" src="'+e+'"/>'),p.hide(),d.hide(),m.show(),u.find(".armFileDragAreaText").hide(),setInterval(function(){f.hide(),h.find(".progressinfo_perc").hide()},1500),"cover"===o)if(jQuery(window).width()>770){if(0!=jQuery('.arm_crop_cover_div[data_id="'+v+'"]').length){jQuery('.arm_crop_cover_div[data_id="'+v+'"]').find("img").attr("src",""),jQuery('.arm_crop_cover_div[data_id="'+v+'"]').find("img").attr("src",e);var l=jQuery('.arm_crop_cover_image[data_id="'+v+'"]');c=new Cropper(l,{viewMode:4,aspectRatio:2.86875,dragCrop:!0,zoomable:!0,rotatable:!1,dashed:!1,cropBoxResizable:!1,dragMode:"move",crop:function(e){jQuery('.arm_crop_cover_image[data_id="'+v+'"]').attr("data-coord",Math.round(e.detail.x)+","+Math.round(e.detail.y)+","+Math.round(e.detail.width)+","+Math.round(e.detail.height))},background:!1}),jQuery('.arm_crop_cover_div_wrapper[data_id="'+v+'"]').bPopup({opacity:.5,closeClass:"arm_popup_close_btn",follow:[!1,!1],escClose:!1,modalClose:!1,zIndex:9999999,onClose:function(){p.show(),d.show(),f.hide(),f.find(".armbar").css("width","0%"),h.html(""),n.find("input").val(""),n.find("input.arm_file_url").attr("data-icon",""),s.val(""),s.attr("value",""),s.trigger("change"),n.find(".armFileMessages").html(""),n.find(".arm_image_file_preview").html(""),n.find(".arm_old_file").html(""),n.find(".arm_old_uploaded_file").html(""),m.hide(),u.find(".armFileDragAreaText").show(),u.find(".armbar").css("width","0%").hide();var e=n.attr("data-iframe");jQuery("#"+e+"_iframe_div").html(" ").append('<iframe id="'+e+'_iframe" src="'+__ARMVIEWURL+'/iframeupload.php"></iframe>'),c.destroy()}})}}else{jQuery('.arm_crop_cover_div[data_id="'+v+'"]').find("img").attr("src","");jQuery("<img />").attr("src",e+"?"+Math.floor(100*Math.random()+1)).on("load",function(){jQuery('.arm_crop_cover_div[data_id="'+v+'"]').append(jQuery(this))});s.parents(".arm_form_input_wrapper").find(".arm_uploaded_file_info img").attr("src",e+"?"+Math.floor(100*Math.random()+1))}else if("profile"===o)if(jQuery(window).width()>770){if(0!=jQuery('.arm_crop_div[data_id="'+v+'"]').length){jQuery('.arm_crop_div[data_id="'+v+'"]').find("img").attr("src",""),jQuery('.arm_crop_div[data_id="'+v+'"]').find("img").attr("src",e);var _=jQuery('.arm_crop_image[data_id="'+v+'"]');c=new Cropper(_,{viewMode:4,aspectRatio:1,dragCrop:!1,zoomable:!0,rotatable:!1,dashed:!1,cropBoxResizable:!1,dragMode:"move",crop:function(e){jQuery('.arm_crop_image[data_id="'+v+'"]').attr("data-coord",Math.round(e.detail.x)+","+Math.round(e.detail.y)+","+Math.round(e.detail.width)+","+Math.round(e.detail.height))},background:!1}),jQuery('.arm_crop_div_wrapper[data_id="'+v+'"]').bPopup({opacity:.5,closeClass:"arm_popup_close_btn",follow:[!1,!1],escClose:!1,modalClose:!1,zIndex:9999999,onClose:function(){p.show(),d.show(),f.hide(),f.find(".armbar").css("width","0%"),h.html(""),n.find("input").val(""),n.find("input.arm_file_url").attr("data-icon",""),s.val(""),s.attr("value",""),s.trigger("change"),n.find(".armFileMessages").html(""),n.find(".arm_image_file_preview").html(""),n.find(".arm_old_file").html(""),n.find(".arm_old_uploaded_file").html(""),m.hide(),u.find(".armFileDragAreaText").show(),u.find(".armbar").css("width","0%").hide();var e=n.attr("data-iframe");jQuery("#"+e+"_iframe_div").html(" ").append('<iframe id="'+e+'_iframe" src="'+__ARMVIEWURL+'/iframeupload.php"></iframe>'),c.destroy()}})}}else{jQuery('.arm_crop_div[data_id="'+v+'"]').find("img").attr("src","");jQuery("<img />").attr("src",e+"?"+Math.floor(100*Math.random()+1)).on("load",function(){jQuery('.arm_crop_div[data_id="'+v+'"]').append(jQuery(this))});s.parents(".arm_form_input_wrapper").find(".arm_uploaded_file_info img").attr("src",e+"?"+Math.floor(100*Math.random()+1))}i=!1}else 200!=b.status&&(a(t,"<div class='arm_error_msg' style='opacity: 1;'><div class='arm_error_box_arrow'></div>"+fileUploadError+"</div>"),s.val(""),s.attr("value",""),s.trigger("change"),p.show(),d.show(),f.hide(),f.find(".armbar").css("width","0%"),h.html(""),n.find("input").val(""),n.find("input.arm_file_url").attr("data-icon",""),n.find(".arm_old_file").html(""),n.find(".arm_old_uploaded_file").html(""),m.hide(),u.find(".armFileDragAreaText").show(),u.find(".armbar").css("width","0%").hide())}}else a(t,"<div class='arm_error_msg' style='opacity: 1;'><div class='arm_error_box_arrow'></div>"+fileUploadError+"</div>");i&&(s.val(""),s.attr("value",""),s.trigger("change"),p.show(),d.show(),f.hide(),f.find(".armbar").css("width","0%"),h.html(""),n.find("input").val(""),n.find(".arm_old_file").html(""),n.find(".arm_old_uploaded_file").html(""),m.hide(),u.find(".armFileDragAreaText").show(),u.find(".armbar").css("width","0%").hide())},A.readAsDataURL(r),!1}function n(e){r(e);var t=jQuery(e.target).attr("data-id"),n=jQuery("#"+t),d=e.target.files||e.dataTransfer.files;return d.length>1?(invalid_msg=fileUploadErrorMultiple,a(n,"<div class='arm_error_msg' style='opacity: 1;'><div class='arm_error_box_arrow'></div>"+invalid_msg+"</div>"),!1):void("null"!=d&&"undefined"!=typeof d&&jQuery.each(d,function(e,a){i(a,n),o(a,n)}))}function d(){var e=new XMLHttpRequest;e.upload&&jQuery(".armFileUploaderWrapper").each(function(){var e=jQuery(this).attr("id");if(""!=e&&null!=e){var a=document.getElementById(e);a.addEventListener("dragover",r,!1),a.addEventListener("dragleave",r,!1),a.addEventListener("drop",n,!1),a.style.display="block"}})}var l="",s="",c="";jQuery(document).on("click",".arm_crop_button",function(){if(jQuery(window).width()>770&&""!=c){var e=jQuery(this).attr("data_id");if(null!=e){jQuery(this).attr("disabled","disabled");var a=jQuery('.arm_crop_image[data_id="'+e+'"]').attr("data-coord"),r=jQuery('.arm_crop_image[data_id="'+e+'"]').attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=profile&src="+r+"&cord="+a+"&update_meta="+l,success:function(a){jQuery("<img />").attr("src",a+"?"+Math.floor(100*Math.random()+1)).on("load",function(){s.parents(".arm_form_input_wrapper").find(".arm_uploaded_file_info img").attr("src",a+"?"+Math.floor(100*Math.random()+1))});jQuery('.arm_crop_div_wrapper[data_id="'+e+'"]').bPopup().close(),setTimeout(function(){jQuery('.arm_crop_button[data_id="'+e+'"]').removeAttr("disabled")},500),c.destroy()}})}}}),jQuery(document).on("click","#arm_skip_avtr_crop_nav_front",function(){if(jQuery(window).width()>770&&""!=c){var e=jQuery(this).attr("data_id");if(null!=e){jQuery(this).attr("disabled","disabled");var a=jQuery('.arm_crop_image[data_id="'+e+'"]').attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=profile&src="+a+"&update_meta="+l,success:function(a){jQuery("<img />").attr("src",a+"?"+Math.floor(100*Math.random()+1)).on("load",function(){s.parents(".arm_form_input_wrapper").find(".arm_uploaded_file_info img").attr("src",a+"?"+Math.floor(100*Math.random()+1))});jQuery('.arm_crop_div_wrapper[data_id="'+e+'"]').bPopup().close(),setTimeout(function(){jQuery('.arm_crop_button[data_id="'+e+'"]').removeAttr("disabled")},500),c.destroy()}})}}}),jQuery(document).on("click",".arm_crop_cover_button",function(){if(jQuery(window).width()>770&&""!=c){var e=jQuery(this).attr("data_id");if(null!=e){jQuery(this).attr("disabled","disabled");var a=jQuery('.arm_crop_cover_image[data_id="'+e+'"]').attr("data-coord"),r=jQuery('.arm_crop_cover_image[data_id="'+e+'"]').attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=cover&src="+r+"&cord="+a+"&update_meta="+l,success:function(a){jQuery("<img />").attr("src",a+"?"+Math.floor(100*Math.random()+1)).on("load",function(){s.parents(".arm_form_input_wrapper").find(".arm_uploaded_file_info img").attr("src",a+"?"+Math.floor(100*Math.random()+1)),jQuery(".arm_profile_picture_block").css("background-image","url("+a+"?"+Math.floor(100*Math.random())+")");var e=s.attr("id");jQuery(".arm_default_cover_photo_wrapper").hide(),jQuery(".arm_remove_default_cover_photo_wrapper").show(),jQuery("#"+e+"_hidden").val(a)});jQuery('.arm_crop_cover_div_wrapper[data_id="'+e+'"]').bPopup().close(),setTimeout(function(){jQuery('.arm_crop_cover_button[data_id="'+e+'"]').removeAttr("disabled")},500),c.destroy()}})}}}),jQuery(document).on("click","#arm_skip_cvr_crop_nav_front",function(){if(jQuery(window).width()>770&&""!=c){var e=jQuery(this).attr("data_id");if(null!=e){jQuery(this).attr("disabled","disabled");var a=jQuery('.arm_crop_cover_image[data_id="'+e+'"]').attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=cover&src="+a+"&update_meta="+l,success:function(a){jQuery("<img />").attr("src",a+"?"+Math.floor(100*Math.random()+1)).on("load",function(){s.parents(".arm_form_input_wrapper").find(".arm_uploaded_file_info img").attr("src",a+"?"+Math.floor(100*Math.random()+1)),jQuery(".arm_profile_picture_block").css("background-image","url("+a+"?"+Math.floor(100*Math.random())+")");var e=s.attr("id");jQuery(".arm_default_cover_photo_wrapper").hide(),jQuery(".arm_remove_default_cover_photo_wrapper").show(),jQuery("#"+e+"_hidden").val(a)});jQuery('.arm_crop_cover_div_wrapper[data_id="'+e+'"]').bPopup().close(),setTimeout(function(){jQuery('.arm_crop_cover_button[data_id="'+e+'"]').removeAttr("disabled")},500),c.destroy()}})}}}),window.File&&window.FileList&&window.FileReader&&d(),jQuery(document).on("click",".armFileUpload:not(.armIEFileUpload)",function(){var e=jQuery(this).attr("id");if(""!=e&&null!=e){var a=document.getElementById(e);a.addEventListener("change",t,!1)}}),jQuery(document).on("click",".armIEFileUpload",function(){var r=jQuery(this),t=r.attr("data-iframe"),i=jQuery("#"+t+"_iframe"),o="";i.contents().find("#armfileselect").click();var n=i.contents().find("#armfileselect").val();if(""!=n&&"undefined"!=typeof n){var d=r.parents(".armFileUploadWrapper"),l=d.find(".armFileBtn"),s=d.find(".armFileUploadContainer"),c=d.find(".armFileRemoveContainer"),p=d.find(".armFileUploadProgressBar"),u=d.find(".armFileUploadProgressInfo"),m=r.parents("form").attr("data-random-id"),f=r.attr("data-file_size"),h=r.attr("data-file_type"),v=r.attr("data-avatar-type");o=r.attr("data-update-meta");var _=1024*f*1024,g=["php","php3","php4","php5","pl","py","jsp","asp","exe","cgi"],y=r.attr("data-msg-invalid");void 0==y&&(y=invalidFileTypeError);var w=n.replace(/C:\\fakepath\\/i,""),b=e(6),j=w.lastIndexOf("."),x=w.substring(j+1),M=/.*(?=\.)/.exec(w);if("badges"==h)var Q="arm_badges_"+b+"_"+M;else if("social_icon"==h)var Q="arm_icon_"+b+"_"+M;else var Q="armFile"+b+"_"+M;var C=Q.replace(/[^\w\s]/gi,"").replace(/ /g,"")+"."+x,R=x.toLowerCase(),A=r.attr("accept"),P=[];if(void 0!=A&&(P=A.replace(/\./g,"").split(","),-1===jQuery.inArray(R,P)))return r.val(C),r.attr("value",C),r.trigger("change"),!1;if(-1===jQuery.inArray(R,g)){"badges"==h?i.contents().find("form").attr("action",__ARMAJAXURL+"?action=arm_upload_badge&fname="+C+"&allow_size="+_):"social_icon"==h?i.contents().find("form").attr("action",__ARMAJAXURL+"?action=arm_upload_social_icon&fname="+C+"&allow_size="+_):i.contents().find("form").attr("action",__ARMAJAXURL+"?action=arm_upload_front&fname="+C+"&allow_size="+_),i.contents().find("form").submit(),d.find(".armUploadedFileName").val(C),s.hide(),l.hide(),d.find(".armFileMessages").html(""),p.show(),p.find(".armbar").css("width","0%"),u.html(""),p.find(".armbar").animate({width:"100%"},"slow"),u.html('<span class="armFileName" style="float:left">'+C+'</span><span class="progressinfo_perc">100%</span>'),c.show();var L=setInterval(function(){var e=jQuery("#"+t+"_iframe").contents().find(".uploaded").length;if(r.val(C),r.attr("value",C),e>0){clearInterval(L);var i=jQuery("#"+t+"_iframe").contents().find(".uploaded").html();if(d.find(".armUploadedFileName").val(C),d.find("input.arm_file_url").attr("data-icon",C),d.find("input.arm_file_url").val(i),jQuery("#"+t+"_iframe_div").html(" ").append('<iframe id="'+t+'_iframe" src="'+__ARMVIEWURL+'/iframeupload.php"></iframe>'),r.trigger("change"),setInterval(function(){p.hide(),u.find(".progressinfo_perc").hide()},1500),"profile"==v){if(-1!=i.indexOf("http://")||-1!=i.indexOf("https://"))var n=i.split("://"),h="//"+n[1];if(jQuery(window).width()>770&&0!=jQuery('.arm_crop_div[data_id="'+m+'"]').length){jQuery('.arm_crop_div[data_id="'+m+'"]').find("img").attr("src",""),jQuery('.arm_crop_div[data_id="'+m+'"]').find("img").attr("src",h);var _=jQuery('.arm_crop_image[data_id="'+m+'"]'),g=new Cropper(_,{viewMode:4,aspectRatio:1,dragCrop:!1,zoomable:!0,rotatable:!1,dashed:!1,cropBoxResizable:!1,dragMode:"move",crop:function(e){jQuery("#arm_crop_image").attr("data-coord",Math.round(e.detail.x)+","+Math.round(e.detail.y)+","+Math.round(e.detail.width)+","+Math.round(e.detail.height))},background:!1});jQuery('.arm_crop_div_wrapper[data_id="'+m+'"]').bPopup({opacity:.5,closeClass:"arm_popup_close_btn",follow:[!1,!1],escClose:!1,modalClose:!1,zIndex:9999999,onClose:function(){g.destroy()}}),jQuery(document).on("click",'.arm_inht_front_usr_avtr label[data_id="'+m+'"]',function(){var e=jQuery(this).attr("data_id");if(null!=e){jQuery(this).attr("disabled","disabled");var a=jQuery("#arm_crop_image").attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=profile&src="+a+"&update_meta="+o,success:function(a){jQuery("<img />").attr("src",a+"?"+Math.floor(100*Math.random()+1)).on("load",function(){r.parents(".arm_form_input_wrapper").find(".arm_uploaded_file_info img").attr("src",a+"?"+Math.floor(100*Math.random()+1))});jQuery('.arm_crop_div_wrapper[data_id="'+e+'"]').bPopup().close(),jQuery('.arm_inht_front_usr_avtr label[data_id="'+m+'"]').removeAttr("disabled"),g.destroy()}})}}),document.getElementsByClassName("arm_crop_button")[0].onclick=function(){var e=jQuery("#arm_crop_image").attr("data-coord"),a=jQuery("#arm_crop_image").attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=profile&src="+a+"&cord="+e,success:function(){jQuery("#arm_crop_div_wrapper").bPopup().close(),g.destroy()}})}}}else if("cover"==v){if(-1!=i.indexOf("http://")||-1!=i.indexOf("https://"))var n=i.split("://"),h="//"+n[1];if(jQuery(window).width()>770&&0!=jQuery('.arm_crop_cover_div[data_id="'+m+'"]').length){jQuery('.arm_crop_cover_div[data_id="'+m+'"]').find("img").attr("src",""),jQuery('.arm_crop_cover_div[data_id="'+m+'"]').find("img").attr("src",h);var w=jQuery('.arm_crop_cover_image[data_id="'+m+'"]'),g=new Cropper(w,{viewMode:4,aspectRatio:2.86875,zoomable:!0,rotatable:!1,dashed:!1,dragMode:"move",cropBoxResizable:!1,background:!1,crop:function(e){jQuery("#arm_crop_cover_image").attr("data-coord",Math.round(e.detail.x)+","+Math.round(e.detail.y)+","+Math.round(e.detail.width)+","+Math.round(e.detail.height))}});jQuery('.arm_crop_cover_div_wrapper[data_id="'+m+'"]').bPopup({opacity:.5,closeClass:"arm_popup_close_btn",follow:[!1,!1],escClose:!1,modalClose:!1,zIndex:9999999,onClose:function(){g.destroy()}}),jQuery(document).on("click",'.arm_inht_front_usr_cvr label[data_id="'+m+'"]',function(){var e=jQuery(this).attr("data_id");if(null!=e){jQuery(this).attr("disabled","disabled");var a=jQuery("#arm_crop_cover_image").attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=cover&src="+a+"&update_meta="+o,success:function(e){jQuery("<img />").attr("src",e+"?"+Math.floor(100*Math.random()+1)).on("load",function(){});jQuery('.arm_crop_cover_div_wrapper[data_id="'+m+'"]').bPopup().close(),jQuery('.arm_inht_front_usr_cvr label[data_id="'+m+'"]').removeAttr("disabled"),g.destroy()}})}}),document.getElementsByClassName("arm_crop_cover_button")[0].onclick=function(){var e=jQuery("#arm_crop_cover_image").attr("data-coord"),a=jQuery("#arm_crop_cover_image").attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=cover&src="+a+"&cord="+e,success:function(e){jQuery("<img />").attr("src",e+"?"+Math.floor(100*Math.random()+1)).on("load",function(){jQuery(".arm_profile_picture_block").css("background-image","url("+e+"?"+Math.floor(100*Math.random())+")")});jQuery("#arm_crop_cover_div_wrapper").bPopup().close(),jQuery("#armRemoveCover").show(),jQuery("#arm_crop_cover_image").attr("src",""),g.destroy()}})}}}}var b=jQuery("#"+t+"_iframe").contents().find(".error_upload").length,j=jQuery("#"+t+"_iframe").contents().find(".error_upload_size").length;if(b>0||j>0){if(clearInterval(L),b>0&&a(r,"<div class='arm_error_msg' style='opacity: 1;'><div class='arm_error_box_arrow'></div>"+fileUploadError+"</div>"),j>0){var x=y;x=x.replace("{SIZE}",f+"MB"),x=x.replace("{size}",f+"MB"),a(r,"<div class='arm_error_msg' style='opacity: 1;'><div class='arm_error_box_arrow'></div>"+x+"</div>")}r.val(""),r.attr("value",""),r.trigger("change"),s.show(),l.show(),p.hide(),p.find(".armbar").css("width","0%"),u.html(""),d.find("input").val(""),d.find(".arm_old_file").html(""),d.find(".arm_old_uploaded_file").html(""),c.hide(),jQuery("#"+t+"_iframe_div").html(" ").append('<iframe id="'+t+'_iframe" src="'+__ARMVIEWURL+'/iframeupload.php"></iframe>')}},500);return!1}}}),jQuery(document).on("click",".armFileRemoveContainer",function(){var e=jQuery(this).parents(".armFileUploadWrapper"),a=e.find(".armFileBtn"),r=e.find(".armFileUpload"),t=e.find(".armFileUploadContainer"),i=e.find(".armFileDragArea"),o=e.find(".armFileRemoveContainer"),n=e.find(".armFileUploadProgressBar"),d=e.find(".armFileUploadProgressInfo"),l=d.find(".armFileName").text(),s=e.find(".arm_file_url").val(),c=e.find(".arm_file_url").attr("data-file_type");return"badges"===c||"directory_cover"===c?(jQuery(".armFileRemoveContainer").hide(),jQuery(".arm_old_file").hide(),jQuery(".armFileUploadProgressInfo").hide(),jQuery(".armFileUploadProgressBar").hide(),jQuery(".armFileUploadContainer").show(),jQuery("#arm_badges_icon").val(""),"directory_cover"===c&&(jQuery(".arm_default_cover_image_url").val(""),e.find(".arm_old_file").html(""),e.find(".arm_old_uploaded_file").html(""),e.find(".armFileUploadProgressInfo span").html(""),jQuery(".armFileUploadProgressInfo").show()),!1):void jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_remove_uploaded_file&file_name="+l+"&file_url="+s+"&type="+c,success:function(){t.show(),a.show(),n.hide(),n.find(".armbar").css("width","0%"),d.html(""),e.find("input").val(""),e.find("input.arm_file_url").attr("data-icon",""),r.val(""),r.attr("value",""),r.trigger("change"),e.find(".armFileMessages").html(""),e.find(".arm_image_file_preview").html(""),e.find(".arm_old_file").html(""),e.find(".arm_old_uploaded_file").html(""),o.hide(),i.find(".armFileDragAreaText").show(),i.find(".armbar").css("width","0%").hide();var l=e.attr("data-iframe");jQuery("#"+l+"_iframe_div").html(" ").append('<iframe id="'+l+'_iframe" src="'+__ARMVIEWURL+'/iframeupload.php"></iframe>')}})})}),function(e,a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var r=a();for(var t in r)("object"==typeof exports?exports:e)[t]=r[t]}}(this,function(){return function(e){function a(t){if(r[t])return r[t].exports;var i=r[t]={exports:{},id:t,loaded:!1};return e[t].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}var r={};return a.m=e,a.c=r,a.p="",a(0)}([function(e,a,r){"use strict";function t(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a["default"]=e,a}function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,a){for(var r=0;r<a.length;r++){var t=a[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,r,t){return r&&e(a.prototype,r),t&&e(a,t),a}}(),d=r(1),l=i(d),s=r(2),c=i(s),p=r(3),u=i(p),m=r(5),f=i(m),h=r(6),v=i(h),_=r(7),g=i(_),y=r(8),w=i(y),b=r(9),j=i(b),x=r(4),M=t(x),Q="cropper",C=Q+"-hidden",R="error",A="load",P="ready",L="crop",D=/^data:/,O=/^data:image\/jpeg.*;base64,/,k=void 0,T=function(){function e(a,r){o(this,e);var t=this;t.element=a[0],t.options=M.extend({},l["default"],M.isPlainObject(r)&&r),t.loaded=!1,t.ready=!1,t.complete=!1,t.rotated=!1,t.cropped=!1,t.disabled=!1,t.replaced=!1,t.limited=!1,t.wheeling=!1,t.isImg=!1,t.originalUrl="",t.canvasData=null,t.cropBoxData=null,t.previews=null,t.init()}return n(e,[{key:"init",value:function(){var e=this,a=e.element,r=a.tagName.toLowerCase(),t=void 0;if(!M.getData(a,Q)){if(M.setData(a,Q,e),"img"===r){if(e.isImg=!0,e.originalUrl=t=a.getAttribute("src"),!t)return;t=a.src}else"canvas"===r&&window.HTMLCanvasElement&&(t=a.toDataURL());e.load(t)}}},{key:"load",value:function(e){var a=this,r=a.options,t=a.element;if(e){if(a.url=e,a.imageData={},!r.checkOrientation||!window.ArrayBuffer)return void a.clone();if(D.test(e))return void(O?a.read(M.dataURLToArrayBuffer(e)):a.clone());var i=new XMLHttpRequest;i.onerror=i.onabort=function(){a.clone()},i.onload=function(){a.read(i.response)},r.checkCrossOrigin&&M.isCrossOriginURL(e)&&t.crossOrigin&&(e=M.addTimestamp(e)),i.open("get",e),i.responseType="arraybuffer",i.send()}}},{key:"read",value:function(e){var a=this,r=a.options,t=M.getOrientation(e),i=a.imageData,o=0,n=1,d=1;if(t>1)switch(a.url=M.arrayBufferToDataURL(e),t){case 2:n=-1;break;case 3:o=-180;break;case 4:d=-1;break;case 5:o=90,d=-1;break;case 6:o=90;break;case 7:o=90,n=-1;break;case 8:o=-90}r.rotatable&&(i.rotate=o),r.scalable&&(i.scaleX=n,i.scaleY=d),a.clone()}},{key:"clone",value:function(){var e=this,a=e.element,r=e.url,t=void 0,i=void 0,o=void 0,n=void 0;e.options.checkCrossOrigin&&M.isCrossOriginURL(r)&&(t=a.crossOrigin,t?i=r:(t="anonymous",i=M.addTimestamp(r))),e.crossOrigin=t,e.crossOriginUrl=i;var d=M.createElement("img");t&&(d.crossOrigin=t),d.src=i||r,e.image=d,e.onStart=o=M.proxy(e.start,e),e.onStop=n=M.proxy(e.stop,e),e.isImg?a.complete?e.start():M.addListener(a,A,o):(M.addListener(d,A,o),M.addListener(d,R,n),M.addClass(d,"cropper-hide"),a.parentNode.insertBefore(d,a.nextSibling))}},{key:"start",value:function(e){var a=this,r=a.isImg?a.element:a.image;e&&(M.removeListener(r,A,a.onStart),M.removeListener(r,R,a.onStop)),M.getImageSize(r,function(e,r){M.extend(a.imageData,{naturalWidth:e,naturalHeight:r,aspectRatio:e/r}),a.loaded=!0,a.build()})}},{key:"stop",value:function(){var e=this,a=e.image;M.removeListener(a,A,e.onStart),M.removeListener(a,R,e.onStop),M.removeChild(a),e.image=null}},{key:"build",value:function(){var e=this,a=e.options,r=e.element,t=e.image,i=void 0,o=void 0,n=void 0,d=void 0,l=void 0,s=void 0;if(e.loaded){e.ready&&e.unbuild();var p=M.createElement("div");p.innerHTML=c["default"],e.container=i=r.parentNode,e.cropper=o=M.getByClass(p,"cropper-container")[0],e.canvas=n=M.getByClass(o,"cropper-canvas")[0],e.dragBox=d=M.getByClass(o,"cropper-drag-box")[0],e.cropBox=l=M.getByClass(o,"cropper-crop-box")[0],e.viewBox=M.getByClass(o,"cropper-view-box")[0],e.face=s=M.getByClass(l,"cropper-face")[0],M.appendChild(n,t),M.addClass(r,C),i.insertBefore(o,r.nextSibling),e.isImg||M.removeClass(t,"cropper-hide"),e.initPreview(),e.bind(),a.aspectRatio=Math.max(0,a.aspectRatio)||NaN,a.viewMode=Math.max(0,Math.min(3,Math.round(a.viewMode)))||0,a.autoCrop?(e.cropped=!0,a.modal&&M.addClass(d,"cropper-modal")):M.addClass(l,C),a.guides||M.addClass(M.getByClass(l,"cropper-dashed"),C),a.center||M.addClass(M.getByClass(l,"cropper-center"),C),a.background&&M.addClass(o,"cropper-bg"),a.highlight||M.addClass(s,"cropper-invisible"),a.cropBoxMovable&&(M.addClass(s,"cropper-move"),M.setData(s,"action","all")),a.cropBoxResizable||(M.addClass(M.getByClass(l,"cropper-line"),C),M.addClass(M.getByClass(l,"cropper-point"),C)),e.setDragMode(a.dragMode),e.render(),e.ready=!0,e.setData(a.data),setTimeout(function(){M.isFunction(a.ready)&&M.addListener(r,P,a.ready,!0),M.dispatchEvent(r,P),M.dispatchEvent(r,L,e.getData()),e.complete=!0},0)}}},{key:"unbuild",value:function(){var e=this;e.ready&&(e.ready=!1,e.complete=!1,e.initialImageData=null,e.initialCanvasData=null,e.initialCropBoxData=null,e.containerData=null,e.canvasData=null,e.cropBoxData=null,e.unbind(),e.resetPreview(),e.previews=null,e.viewBox=null,e.cropBox=null,e.dragBox=null,e.canvas=null,e.container=null,M.removeChild(e.cropper),e.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=k,e}},{key:"setDefaults",value:function(e){M.extend(l["default"],M.isPlainObject(e)&&e)}}]),e}();M.extend(T.prototype,u["default"]),M.extend(T.prototype,f["default"]),M.extend(T.prototype,v["default"]),M.extend(T.prototype,g["default"]),M.extend(T.prototype,w["default"]),M.extend(T.prototype,j["default"]),"undefined"!=typeof window&&(k=window.Cropper,window.Cropper=T),a["default"]=T},function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!1,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null}},function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>'},function(e,a,r){"use strict";function t(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a["default"]=e,a}Object.defineProperty(a,"__esModule",{value:!0});var i=r(4),o=t(i);a["default"]={render:function(){var e=this;e.initContainer(),e.initCanvas(),e.initCropBox(),e.renderCanvas(),e.cropped&&e.renderCropBox()},initContainer:function(){var e=this,a=e.options,r=e.element,t=e.container,i=e.cropper,n=void 0;o.addClass(i,"cropper-hidden"),o.removeClass(r,"cropper-hidden"),e.containerData=n={width:Math.max(t.offsetWidth,Number(a.minContainerWidth)||200),height:Math.max(t.offsetHeight,Number(a.minContainerHeight)||100)},o.setStyle(i,{width:n.width,height:n.height}),o.addClass(r,"cropper-hidden"),o.removeClass(i,"cropper-hidden")},initCanvas:function(){var e=this,a=e.options.viewMode,r=e.containerData,t=e.imageData,i=90===Math.abs(t.rotate),n=i?t.naturalHeight:t.naturalWidth,d=i?t.naturalWidth:t.naturalHeight,l=n/d,s=r.width,c=r.height;r.height*l>r.width?3===a?s=r.height*l:c=r.width/l:3===a?c=r.width/l:s=r.height*l;var p={naturalWidth:n,naturalHeight:d,aspectRatio:l,width:s,height:c};p.oldLeft=p.left=(r.width-s)/2,p.oldTop=p.top=(r.height-c)/2,e.canvasData=p,e.limited=1===a||2===a,e.limitCanvas(!0,!0),e.initialImageData=o.extend({},t),e.initialCanvasData=o.extend({},p)},limitCanvas:function(e,a){var r=this,t=r.options,i=t.viewMode,o=r.containerData,n=r.canvasData,d=n.aspectRatio,l=r.cropBoxData,s=r.cropped&&l,c=void 0,p=void 0,u=void 0,m=void 0;e&&(c=Number(t.minCanvasWidth)||0,p=Number(t.minCanvasHeight)||0,i>1?(c=Math.max(c,o.width),p=Math.max(p,o.height),3===i&&(p*d>c?c=p*d:p=c/d)):i>0&&(c?c=Math.max(c,s?l.width:0):p?p=Math.max(p,s?l.height:0):s&&(c=l.width,p=l.height,p*d>c?c=p*d:p=c/d)),c&&p?p*d>c?p=c/d:c=p*d:c?p=c/d:p&&(c=p*d),n.minWidth=c,n.minHeight=p,n.maxWidth=1/0,n.maxHeight=1/0),a&&(i?(u=o.width-n.width,m=o.height-n.height,n.minLeft=Math.min(0,u),n.minTop=Math.min(0,m),n.maxLeft=Math.max(0,u),n.maxTop=Math.max(0,m),s&&r.limited&&(n.minLeft=Math.min(l.left,l.left+(l.width-n.width)),n.minTop=Math.min(l.top,l.top+(l.height-n.height)),n.maxLeft=l.left,n.maxTop=l.top,2===i&&(n.width>=o.width&&(n.minLeft=Math.min(0,u),n.maxLeft=Math.max(0,u)),n.height>=o.height&&(n.minTop=Math.min(0,m),n.maxTop=Math.max(0,m))))):(n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=o.width,n.maxTop=o.height))},renderCanvas:function(e){var a=this,r=a.canvasData,t=a.imageData,i=t.rotate,n=void 0,d=void 0;a.rotated&&(a.rotated=!1,d=o.getRotatedSizes({width:t.width,height:t.height,degree:i}),n=d.width/d.height,n!==r.aspectRatio&&(r.left-=(d.width-r.width)/2,r.top-=(d.height-r.height)/2,r.width=d.width,r.height=d.height,r.aspectRatio=n,r.naturalWidth=t.naturalWidth,r.naturalHeight=t.naturalHeight,i%180&&(d=o.getRotatedSizes({width:t.naturalWidth,height:t.naturalHeight,degree:i}),r.naturalWidth=d.width,r.naturalHeight=d.height),a.limitCanvas(!0,!1))),(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),a.limitCanvas(!1,!0),r.oldLeft=r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.oldTop=r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),o.setStyle(a.canvas,{width:r.width,height:r.height,left:r.left,top:r.top}),a.renderImage(),a.cropped&&a.limited&&a.limitCropBox(!0,!0),e&&a.output()},renderImage:function(e){var a=this,r=a.canvasData,t=a.imageData,i=void 0,n=void 0,d=void 0,l=void 0;t.rotate&&(n=o.getRotatedSizes({width:r.width,height:r.height,degree:t.rotate,aspectRatio:t.aspectRatio},!0),d=n.width,l=n.height,i={width:d,height:l,left:(r.width-d)/2,top:(r.height-l)/2}),o.extend(t,i||{width:r.width,height:r.height,left:0,top:0});var s=o.getTransform(t);o.setStyle(a.image,{width:t.width,height:t.height,marginLeft:t.left,marginTop:t.top,WebkitTransform:s,msTransform:s,transform:s}),e&&a.output()},initCropBox:function(){var e=this,a=e.options,r=a.aspectRatio,t=Number(a.autoCropArea)||.8,i=e.canvasData,n={width:i.width,height:i.height};r&&(i.height*r>i.width?n.height=n.width/r:n.width=n.height*r),e.cropBoxData=n,e.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*t),n.height=Math.max(n.minHeight,n.height*t),n.oldLeft=n.left=i.left+(i.width-n.width)/2,n.oldTop=n.top=i.top+(i.height-n.height)/2,e.initialCropBoxData=o.extend({},n)},limitCropBox:function(e,a){var r=this,t=r.options,i=t.aspectRatio,o=r.containerData,n=r.canvasData,d=r.cropBoxData,l=r.limited,s=void 0,c=void 0,p=void 0,u=void 0;e&&(s=Number(t.minCropBoxWidth)||0,c=Number(t.minCropBoxHeight)||0,s=Math.min(s,o.width),c=Math.min(c,o.height),p=Math.min(o.width,l?n.width:o.width),u=Math.min(o.height,l?n.height:o.height),i&&(s&&c?c*i>s?c=s/i:s=c*i:s?c=s/i:c&&(s=c*i),u*i>p?u=p/i:p=u*i),d.minWidth=Math.min(s,p),d.minHeight=Math.min(c,u),d.maxWidth=p,d.maxHeight=u),a&&(l?(d.minLeft=Math.max(0,n.left),d.minTop=Math.max(0,n.top),d.maxLeft=Math.min(o.width,n.left+n.width)-d.width,d.maxTop=Math.min(o.height,n.top+n.height)-d.height):(d.minLeft=0,d.minTop=0,d.maxLeft=o.width-d.width,d.maxTop=o.height-d.height))},renderCropBox:function(){var e=this,a=e.options,r=e.containerData,t=e.cropBoxData;(t.width>t.maxWidth||t.width<t.minWidth)&&(t.left=t.oldLeft),(t.height>t.maxHeight||t.height<t.minHeight)&&(t.top=t.oldTop),t.width=Math.min(Math.max(t.width,t.minWidth),t.maxWidth),t.height=Math.min(Math.max(t.height,t.minHeight),t.maxHeight),e.limitCropBox(!1,!0),t.oldLeft=t.left=Math.min(Math.max(t.left,t.minLeft),t.maxLeft),t.oldTop=t.top=Math.min(Math.max(t.top,t.minTop),t.maxTop),a.movable&&a.cropBoxMovable&&o.setData(e.face,"action",t.width===r.width&&t.height===r.height?"move":"all"),o.setStyle(e.cropBox,{width:t.width,height:t.height,left:t.left,top:t.top}),e.cropped&&e.limited&&e.limitCanvas(!0,!0),e.disabled||e.output()},output:function(){var e=this;e.preview(),e.complete&&o.dispatchEvent(e.element,"crop",e.getData())}}},function(e,a){"use strict";function r(e){return re.call(e).slice(8,-1).toLowerCase()}function t(e){return"number"==typeof e&&!isNaN(e)}function i(e){return"undefined"==typeof e}function o(e){return"object"===("undefined"==typeof e?"undefined":H(e))&&null!==e}function n(e){if(!o(e))return!1;try{var a=e.constructor,r=a.prototype;return a&&r&&te.call(r,"isPrototypeOf")}catch(t){return!1}}function d(e){return"function"===r(e)}function l(e){return Array.isArray?Array.isArray(e):"array"===r(e)}function s(e,a){return a=a>=0?a:0,Array.from?Array.from(e).slice(a):ie.call(e,a)}function c(e){return"string"==typeof e&&(e=e.trim?e.trim():e.replace(G,"$1")),e}function p(e,a){if(e&&d(a)){var r=void 0;if(l(e)||t(e.length)){var i=e.length;for(r=0;i>r&&a.call(e,e[r],r,e)!==!1;r++);}else o(e)&&Object.keys(e).forEach(function(r){a.call(e,e[r],r,e)})}return e}function u(){for(var e=arguments.length,a=Array(e),r=0;e>r;r++)a[r]=arguments[r];var t=a[0]===!0,i=t?a[1]:a[0];return a.length>1&&(a.shift(),a.forEach(function(e){o(e)&&Object.keys(e).forEach(function(a){t&&o(i[a])?u(!0,i[a],e[a]):i[a]=e[a]})})),i}function m(e,a){for(var r=arguments.length,t=Array(r>2?r-2:0),i=2;r>i;i++)t[i-2]=arguments[i];return function(){for(var r=arguments.length,i=Array(r),o=0;r>o;o++)i[o]=arguments[o];return e.apply(a,t.concat(i))}}function f(e,a){var r=e.style;p(a,function(e,a){Z.test(a)&&t(e)&&(e+="px"),r[a]=e})}function h(e,a){return e.classList?e.classList.contains(a):e.className.indexOf(a)>-1}function v(e,a){if(t(e.length))return void p(e,function(e){v(e,a)});if(e.classList)return void e.classList.add(a);var r=c(e.className);r?r.indexOf(a)<0&&(e.className=r+" "+a):e.className=a}function _(e,a){return t(e.length)?void p(e,function(e){_(e,a)}):e.classList?void e.classList.remove(a):void(e.className.indexOf(a)>=0&&(e.className=e.className.replace(a,"")))}function g(e,a,r){return t(e.length)?void p(e,function(e){g(e,a,r)}):void(r?v(e,a):_(e,a))}function y(e){return e.replace(J,"$1-$2").toLowerCase()}function w(e,a){return o(e[a])?e[a]:e.dataset?e.dataset[a]:e.getAttribute("data-"+y(a))}function b(e,a,r){o(r)?e[a]=r:e.dataset?e.dataset[a]=r:e.setAttribute("data-"+y(a),r)}function j(e,a){o(e[a])?delete e[a]:e.dataset?delete e.dataset[a]:e.removeAttribute("data-"+y(a))}function x(e,a,r){var t=c(a).split(V);return t.length>1?void p(t,function(a){x(e,a,r)}):void(e.removeEventListener?e.removeEventListener(a,r,!1):e.detachEvent&&e.detachEvent("on"+a,r))}function M(e,a,r,t){var i=c(a).split(V),o=r;return i.length>1?void p(i,function(a){M(e,a,r)}):(t&&(r=function(){for(var t=arguments.length,i=Array(t),n=0;t>n;n++)i[n]=arguments[n];return x(e,a,r),o.apply(e,i)}),void(e.addEventListener?e.addEventListener(a,r,!1):e.attachEvent&&e.attachEvent("on${type}",r)))}function Q(e,a,r){if(e.dispatchEvent){var t=void 0;return d(Event)&&d(CustomEvent)?t=i(r)?new Event(a,{bubbles:!0,cancelable:!0}):new CustomEvent(a,{detail:r,bubbles:!0,cancelable:!0}):i(r)?(t=document.createEvent("Event"),t.initEvent(a,!0,!0)):(t=document.createEvent("CustomEvent"),t.initCustomEvent(a,!0,!0,r)),e.dispatchEvent(t)}return e.fireEvent?e.fireEvent("on"+a):!0}function C(e){var a=e||window.event;if(a.target||(a.target=a.srcElement||document),!t(a.pageX)&&t(a.clientX)){var r=e.target.ownerDocument||document,i=r.documentElement,o=r.body;a.pageX=a.clientX+((i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0)),a.pageY=a.clientY+((i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0))}return a}function R(e){var a=document.documentElement,r=e.getBoundingClientRect();return{left:r.left+((window.scrollX||a&&a.scrollLeft||0)-(a&&a.clientLeft||0)),top:r.top+((window.scrollY||a&&a.scrollTop||0)-(a&&a.clientTop||0))}}function A(e){var a=e.length,r=0,t=0;return a&&(p(e,function(e){r+=e.pageX,t+=e.pageY}),r/=a,t/=a),{pageX:r,pageY:t}}function P(e,a){return e.getElementsByTagName(a)}function L(e,a){return e.getElementsByClassName?e.getElementsByClassName(a):e.querySelectorAll("."+a)}function D(e){return document.createElement(e)}function O(e,a){e.appendChild(a)}function k(e){e.parentNode&&e.parentNode.removeChild(e)}function T(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function B(e){var a=e.match(q);return a&&(a[1]!==location.protocol||a[2]!==location.hostname||a[3]!==location.port)}function U(e){var a="timestamp="+(new Date).getTime();return e+(-1===e.indexOf("?")?"?":"&")+a}function E(e,a){if(e.naturalWidth&&!ee)return void a(e.naturalWidth,e.naturalHeight);var r=D("img");r.onload=function(){a(this.width,this.height)},r.src=e.src}function F(e){var a=[],r=e.rotate,i=e.scaleX,o=e.scaleY;return t(r)&&0!==r&&a.push("rotate("+r+"deg)"),t(i)&&1!==i&&a.push("scaleX("+i+")"),t(o)&&1!==o&&a.push("scaleY("+o+")"),a.length?a.join(" "):"none"}function I(e,a){var r=Math.abs(e.degree)%180,t=(r>90?180-r:r)*Math.PI/180,i=Math.sin(t),o=Math.cos(t),n=e.width,d=e.height,l=e.aspectRatio,s=void 0,c=void 0;return a?(s=n/(o+i/l),c=s/l):(s=n*o+d*i,c=n*i+d*o),{width:s,height:c}}function X(e,a){var r=D("canvas"),i=r.getContext("2d"),o=0,n=0,d=a.naturalWidth,l=a.naturalHeight,s=a.rotate,c=a.scaleX,p=a.scaleY,u=t(c)&&t(p)&&(1!==c||1!==p),m=t(s)&&0!==s,f=m||u,h=d*Math.abs(c),v=l*Math.abs(p),_=void 0,g=void 0,y=void 0;return u&&(_=h/2,g=v/2),m&&(y=I({width:h,height:v,degree:s}),h=y.width,v=y.height,_=h/2,g=v/2),r.width=h,r.height=v,f&&(o=-d/2,n=-l/2,i.save(),i.translate(_,g)),m&&i.rotate(s*Math.PI/180),u&&i.scale(c,p),i.drawImage(e,Math.floor(o),Math.floor(n),Math.floor(d),Math.floor(l)),f&&i.restore(),r}function S(e,a,r){var t="",i=a;for(r+=a;r>i;i++)t+=oe(e.getUint8(i));return t}function z(e){var a=new DataView(e),r=a.byteLength,t=void 0,i=void 0,o=void 0,n=void 0,d=void 0,l=void 0,s=void 0,c=void 0,p=void 0,u=void 0;if(255===a.getUint8(0)&&216===a.getUint8(1))for(p=2;r>p;){if(255===a.getUint8(p)&&225===a.getUint8(p+1)){s=p;break}p++}if(s&&(i=s+4,o=s+10,"Exif"===S(a,i,4)&&(l=a.getUint16(o),d=18761===l,(d||19789===l)&&42===a.getUint16(o+2,d)&&(n=a.getUint32(o+4,d),n>=8&&(c=o+n)))),c)for(r=a.getUint16(c,d),u=0;r>u;u++)if(p=c+12*u+2,274===a.getUint16(p,d)){p+=8,t=a.getUint16(p,d),ee&&a.setUint16(p,1,d);break}return t}function N(e){var a=e.replace(Y,""),r=atob(a),t=r.length,i=new ArrayBuffer(t),o=new Uint8Array(i),n=void 0;for(n=0;t>n;n++)o[n]=r.charCodeAt(n);return i}function W(e){var a=new Uint8Array(e),r=a.length,t="",i=void 0;for(i=0;r>i;i++)t+=oe(a[i]);return"data:image/jpeg;base64,"+btoa(t)}Object.defineProperty(a,"__esModule",{value:!0});var H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};a.typeOf=r,a.isNumber=t,a.isUndefined=i,a.isObject=o,a.isPlainObject=n,a.isFunction=d,a.isArray=l,a.toArray=s,a.trim=c,a.each=p,a.extend=u,a.proxy=m,a.setStyle=f,a.hasClass=h,a.addClass=v,a.removeClass=_,a.toggleClass=g,a.hyphenate=y,a.getData=w,a.setData=b,a.removeData=j,a.removeListener=x,a.dispatchEvent=Q,a.getEvent=C,a.getOffset=R,a.getTouchesCenter=A,a.getByTag=P,a.getByClass=L,a.createElement=D,a.appendChild=O,a.removeChild=k,a.empty=T,a.isCrossOriginURL=B,a.addTimestamp=U,a.getImageSize=E,a.getTransform=F,a.getRotatedSizes=I,a.getSourceCanvas=X,a.getStringFromCharCode=S,a.getOrientation=z,a.dataURLToArrayBuffer=N,a.arrayBufferToDataURL=W;var Y=/^data:([^;]+);base64,/,J=/([a-z\d])([A-Z])/g,q=/^(https?:)\/\/([^:\/\?#]+):?(\d*)/i,V=/\s+/,Z=/^(width|height|left|top|marginLeft|marginTop)$/,G=/^\s+(.*)\s+$/,$=/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i,K=window.navigator,ee=K&&$.test(K.userAgent),ae=Object.prototype,re=ae.toString,te=ae.hasOwnProperty,ie=Array.prototype.slice,oe=String.fromCharCode;a.addListener=M},function(e,a,r){"use strict";function t(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a["default"]=e,a}Object.defineProperty(a,"__esModule",{value:!0});var i=r(4),o=t(i),n="preview";a["default"]={initPreview:function(){var e=this,a=e.options.preview,r=o.createElement("img"),t=e.crossOrigin,i=t?e.crossOriginUrl:e.url;if(t&&(r.crossOrigin=t),r.src=i,o.appendChild(e.viewBox,r),e.image2=r,a){var d=document.querySelectorAll(a);e.previews=d,o.each(d,function(e){var a=o.createElement("img");o.setData(e,n,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(a.crossOrigin=t),a.src=i,a.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',o.empty(e),o.appendChild(e,a)})}},resetPreview:function(){o.each(this.previews,function(e){var a=o.getData(e,n);o.setStyle(e,{width:a.width,height:a.height}),e.innerHTML=a.html,o.removeData(e,n)})},preview:function(){var e=this,a=e.imageData,r=e.canvasData,t=e.cropBoxData,i=t.width,d=t.height,l=a.width,s=a.height,c=t.left-r.left-a.left,p=t.top-r.top-a.top,u=o.getTransform(a),m={WebkitTransform:u,msTransform:u,transform:u};e.cropped&&!e.disabled&&(o.setStyle(e.image2,o.extend({width:l,height:s,marginLeft:-c,marginTop:-p},m)),o.each(e.previews,function(e){var a=o.getData(e,n),r=a.width,t=a.height,u=r,f=t,h=1;i&&(h=r/i,f=d*h),d&&f>t&&(h=t/d,u=i*h,f=t),o.setStyle(e,{width:u,height:f}),o.setStyle(o.getByTag(e,"img")[0],o.extend({width:l*h,height:s*h,marginLeft:-c*h,marginTop:-p*h},m))}))}}},function(e,a,r){"use strict";function t(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a["default"]=e,a}Object.defineProperty(a,"__esModule",{value:!0});var i=r(4),o=t(i),n="mousedown touchstart pointerdown MSPointerDown",d="mousemove touchmove pointermove MSPointerMove",l="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",s="wheel mousewheel DOMMouseScroll",c="dblclick",p="resize",u="cropstart",m="cropmove",f="cropend",h="crop",v="zoom";a["default"]={bind:function(){var e=this,a=e.options,r=e.element,t=e.cropper;o.isFunction(a.cropstart)&&o.addListener(r,u,a.cropstart),o.isFunction(a.cropmove)&&o.addListener(r,m,a.cropmove),o.isFunction(a.cropend)&&o.addListener(r,f,a.cropend),o.isFunction(a.crop)&&o.addListener(r,h,a.crop),o.isFunction(a.zoom)&&o.addListener(r,v,a.zoom),o.addListener(t,n,e.onCropStart=o.proxy(e.cropStart,e)),a.zoomable&&a.zoomOnWheel&&o.addListener(t,s,e.onWheel=o.proxy(e.wheel,e)),a.toggleDragModeOnDblclick&&o.addListener(t,c,e.onDblclick=o.proxy(e.dblclick,e)),o.addListener(document,d,e.onCropMove=o.proxy(e.cropMove,e)),o.addListener(document,l,e.onCropEnd=o.proxy(e.cropEnd,e)),a.responsive&&o.addListener(window,p,e.onResize=o.proxy(e.resize,e))},unbind:function(){var e=this,a=e.options,r=e.element,t=e.cropper;o.isFunction(a.cropstart)&&o.removeListener(r,u,a.cropstart),o.isFunction(a.cropmove)&&o.removeListener(r,m,a.cropmove),o.isFunction(a.cropend)&&o.removeListener(r,f,a.cropend),o.isFunction(a.crop)&&o.removeListener(r,h,a.crop),o.isFunction(a.zoom)&&o.removeListener(r,v,a.zoom),o.removeListener(t,n,e.onCropStart),a.zoomable&&a.zoomOnWheel&&o.removeListener(t,s,e.onWheel),a.toggleDragModeOnDblclick&&o.removeListener(t,c,e.onDblclick),o.removeListener(document,d,e.onCropMove),o.removeListener(document,l,e.onCropEnd),a.responsive&&o.removeListener(window,p,e.onResize)}}},function(e,a,r){"use strict";function t(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a["default"]=e,a}Object.defineProperty(a,"__esModule",{value:!0}),a.REGEXP_ACTIONS=void 0;var i=r(4),o=t(i),n=a.REGEXP_ACTIONS=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;a["default"]={resize:function(){var e=this,a=e.options.restore,r=e.container,t=e.containerData;if(!e.disabled&&t){var i=r.offsetWidth/t.width,n=void 0,d=void 0;1===i&&r.offsetHeight===t.height||(a&&(n=e.getCanvasData(),d=e.getCropBoxData()),e.render(),a&&(e.setCanvasData(o.each(n,function(e,a){n[a]=e*i})),e.setCropBoxData(o.each(d,function(e,a){d[a]=e*i}))))}},dblclick:function(){var e=this;e.disabled||e.setDragMode(o.hasClass(e.dragBox,"cropper-crop")?"move":"crop")},wheel:function(e){var a=this,r=o.getEvent(e),t=Number(a.options.wheelZoomRatio)||.1,i=1;a.disabled||(r.preventDefault(),a.wheeling||(a.wheeling=!0,setTimeout(function(){a.wheeling=!1},50),r.deltaY?i=r.deltaY>0?1:-1:r.wheelDelta?i=-r.wheelDelta/120:r.detail&&(i=r.detail>0?1:-1),a.zoom(-i*t,r)))},cropStart:function(e){var a=this,r=a.options,t=o.getEvent(e),i=t.touches,d=void 0,l=void 0,s=void 0;if(!a.disabled){if(i){if(d=i.length,d>1){if(!r.zoomable||!r.zoomOnTouch||2!==d)return;l=i[1],a.startX2=l.pageX,a.startY2=l.pageY,s="zoom"}l=i[0]}if(s=s||o.getData(t.target,"action"),n.test(s)){if(o.dispatchEvent(a.element,"cropstart",{originalEvent:t,action:s})===!1)return;t.preventDefault(),a.action=s,a.cropping=!1,a.startX=l?l.pageX:t.pageX,a.startY=l?l.pageY:t.pageY,"crop"===s&&(a.cropping=!0,o.addClass(a.dragBox,"cropper-modal"))}}},cropMove:function(e){var a=this,r=a.options,t=o.getEvent(e),i=t.touches,n=a.action,d=void 0,l=void 0;if(!a.disabled){if(i){if(d=i.length,d>1){if(!r.zoomable||!r.zoomOnTouch||2!==d)return;l=i[1],a.endX2=l.pageX,a.endY2=l.pageY}l=i[0]}if(n){if(o.dispatchEvent(a.element,"cropmove",{originalEvent:t,action:n})===!1)return;t.preventDefault(),a.endX=l?l.pageX:t.pageX,a.endY=l?l.pageY:t.pageY,a.change(t.shiftKey,"zoom"===n?t:null)}}},cropEnd:function(e){var a=this,r=a.options,t=o.getEvent(e),i=a.action;a.disabled||i&&(t.preventDefault(),a.cropping&&(a.cropping=!1,o.toggleClass(a.dragBox,"cropper-modal",a.cropped&&r.modal)),a.action="",o.dispatchEvent(a.element,"cropend",{originalEvent:t,action:i}))}}},function(e,a,r){"use strict";function t(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a["default"]=e,a}Object.defineProperty(a,"__esModule",{value:!0});var i=r(4),o=t(i),n="e",d="w",l="s",s="n",c="se",p="sw",u="ne",m="nw";a["default"]={change:function(e,a){var r=this,t=r.options,i=r.containerData,f=r.canvasData,h=r.cropBoxData,v=t.aspectRatio,_=r.action,g=h.width,y=h.height,w=h.left,b=h.top,j=w+g,x=b+y,M=0,Q=0,C=i.width,R=i.height,A=!0,P=void 0;!v&&e&&(v=g&&y?g/y:1),r.limited&&(M=h.minLeft,Q=h.minTop,C=M+Math.min(i.width,f.left+f.width),R=Q+Math.min(i.height,f.top+f.height));var L={x:r.endX-r.startX,y:r.endY-r.startY};switch(v&&(L.X=L.y*v,L.Y=L.x/v),_){case"all":w+=L.x,b+=L.y;break;case n:if(L.x>=0&&(j>=C||v&&(Q>=b||x>=R))){A=!1;break}g+=L.x,v&&(y=g/v,b-=L.Y/2),0>g&&(_=d,g=0);break;case s:if(L.y<=0&&(Q>=b||v&&(M>=w||j>=C))){A=!1;break}y-=L.y,b+=L.y,v&&(g=y*v,w+=L.X/2),0>y&&(_=l,y=0);break;case d:if(L.x<=0&&(M>=w||v&&(Q>=b||x>=R))){A=!1;break}g-=L.x,w+=L.x,v&&(y=g/v,b+=L.Y/2),0>g&&(_=n,g=0);break;case l:if(L.y>=0&&(x>=R||v&&(M>=w||j>=C))){A=!1;break}y+=L.y,v&&(g=y*v,w-=L.X/2),0>y&&(_=s,y=0);break;case u:if(v){if(L.y<=0&&(Q>=b||j>=C)){A=!1;break}y-=L.y,b+=L.y,g=y*v}else L.x>=0?C>j?g+=L.x:L.y<=0&&Q>=b&&(A=!1):g+=L.x,L.y<=0?b>Q&&(y-=L.y,b+=L.y):(y-=L.y,b+=L.y);0>g&&0>y?(_=p,y=0,g=0):0>g?(_=m,g=0):0>y&&(_=c,y=0);break;case m:if(v){if(L.y<=0&&(Q>=b||M>=w)){A=!1;break}y-=L.y,b+=L.y,g=y*v,w+=L.X}else L.x<=0?w>M?(g-=L.x,w+=L.x):L.y<=0&&Q>=b&&(A=!1):(g-=L.x,w+=L.x),L.y<=0?b>Q&&(y-=L.y,b+=L.y):(y-=L.y,b+=L.y);0>g&&0>y?(_=c,y=0,g=0):0>g?(_=u,g=0):0>y&&(_=p,y=0);break;case p:if(v){if(L.x<=0&&(M>=w||x>=R)){A=!1;break}g-=L.x,w+=L.x,y=g/v}else L.x<=0?w>M?(g-=L.x,w+=L.x):L.y>=0&&x>=R&&(A=!1):(g-=L.x,w+=L.x),L.y>=0?R>x&&(y+=L.y):y+=L.y;0>g&&0>y?(_=u,y=0,g=0):0>g?(_=c,g=0):0>y&&(_=m,y=0);break;case c:if(v){if(L.x>=0&&(j>=C||x>=R)){A=!1;break}g+=L.x,y=g/v}else L.x>=0?C>j?g+=L.x:L.y>=0&&x>=R&&(A=!1):g+=L.x,L.y>=0?R>x&&(y+=L.y):y+=L.y;0>g&&0>y?(_=m,y=0,g=0):0>g?(_=p,g=0):0>y&&(_=u,y=0);break;case"move":r.move(L.x,L.y),A=!1;break;case"zoom":r.zoom(function(e,a,r,t){var i=Math.sqrt(e*e+a*a),o=Math.sqrt(r*r+t*t);return(o-i)/i}(Math.abs(r.startX-r.startX2),Math.abs(r.startY-r.startY2),Math.abs(r.endX-r.endX2),Math.abs(r.endY-r.endY2)),a),r.startX2=r.endX2,r.startY2=r.endY2,A=!1;break;case"crop":if(!L.x||!L.y){A=!1;break}P=o.getOffset(r.cropper),w=r.startX-P.left,b=r.startY-P.top,g=h.minWidth,y=h.minHeight,L.x>0?_=L.y>0?c:u:L.x<0&&(w-=g,_=L.y>0?p:m),L.y<0&&(b-=y),r.cropped||(o.removeClass(r.cropBox,"cropper-hidden"),r.cropped=!0,r.limited&&r.limitCropBox(!0,!0))}A&&(h.width=g,h.height=y,h.left=w,h.top=b,r.action=_,r.renderCropBox()),r.startX=r.endX,r.startY=r.endY}}},function(e,a,r){"use strict";function t(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a["default"]=e,a}function i(e){if(Array.isArray(e)){for(var a=0,r=Array(e.length);a<e.length;a++)r[a]=e[a];return r}return Array.from(e)}Object.defineProperty(a,"__esModule",{value:!0});var o=r(4),n=t(o);a["default"]={crop:function(){var e=this;return e.ready&&!e.disabled&&(e.cropped||(e.cropped=!0,e.limitCropBox(!0,!0),e.options.modal&&n.addClass(e.dragBox,"cropper-modal"),n.removeClass(e.cropBox,"cropper-hidden")),e.setCropBoxData(e.initialCropBoxData)),e},reset:function(){var e=this;return e.ready&&!e.disabled&&(e.imageData=n.extend({},e.initialImageData),e.canvasData=n.extend({},e.initialCanvasData),e.cropBoxData=n.extend({},e.initialCropBoxData),e.renderCanvas(),e.cropped&&e.renderCropBox()),e},clear:function(){var e=this;return e.cropped&&!e.disabled&&(n.extend(e.cropBoxData,{left:0,top:0,width:0,height:0}),e.cropped=!1,e.renderCropBox(),e.limitCanvas(),e.renderCanvas(),n.removeClass(e.dragBox,"cropper-modal"),n.addClass(e.cropBox,"cropper-hidden")),e},replace:function(e,a){var r=this;return!r.disabled&&e&&(r.isImg&&(r.element.src=e),a?(r.url=e,r.image.src=e,r.ready&&(r.image2.src=e,n.each(r.previews,function(a){n.getByTag(a,"img")[0].src=e}))):(r.isImg&&(r.replaced=!0),r.options.data=null,r.load(e))),r},enable:function(){var e=this;return e.ready&&(e.disabled=!1,n.removeClass(e.cropper,"cropper-disabled")),e},disable:function(){var e=this;return e.ready&&(e.disabled=!0,n.addClass(e.cropper,"cropper-disabled")),e},destroy:function(){var e=this,a=e.element,r=e.image;return e.loaded?(e.isImg&&e.replaced&&(a.src=e.originalUrl),e.unbuild(),n.removeClass(a,"cropper-hidden")):e.isImg?n.removeListener(a,"load",e.start):r&&n.removeChild(r),n.removeData(a,"cropper"),e},move:function(e,a){var r=this,t=r.canvasData;return r.moveTo(n.isUndefined(e)?e:t.left+Number(e),n.isUndefined(a)?a:t.top+Number(a))},moveTo:function(e,a){var r=this,t=r.canvasData,i=!1;return n.isUndefined(a)&&(a=e),e=Number(e),a=Number(a),r.ready&&!r.disabled&&r.options.movable&&(n.isNumber(e)&&(t.left=e,i=!0),n.isNumber(a)&&(t.top=a,i=!0),i&&r.renderCanvas(!0)),r},zoom:function(e,a){var r=this,t=r.canvasData;return e=Number(e),e=0>e?1/(1-e):1+e,r.zoomTo(t.width*e/t.naturalWidth,a)},zoomTo:function(e,a){var r=this,t=r.options,i=r.canvasData,o=i.width,d=i.height,l=i.naturalWidth,s=i.naturalHeight,c=void 0,p=void 0,u=void 0,m=void 0;if(e=Number(e),e>=0&&r.ready&&!r.disabled&&t.zoomable){if(c=l*e,p=s*e,n.dispatchEvent(r.element,"zoom",{originalEvent:a,oldRatio:o/l,ratio:c/l})===!1)return r;a?(u=n.getOffset(r.cropper),m=a.touches?n.getTouchesCenter(a.touches):{pageX:a.pageX,pageY:a.pageY},i.left-=(c-o)*((m.pageX-u.left-i.left)/o),i.top-=(p-d)*((m.pageY-u.top-i.top)/d)):(i.left-=(c-o)/2,i.top-=(p-d)/2),i.width=c,i.height=p,r.renderCanvas(!0)}return r},rotate:function(e){var a=this;return a.rotateTo((a.imageData.rotate||0)+Number(e))},rotateTo:function(e){var a=this;return e=Number(e),n.isNumber(e)&&a.ready&&!a.disabled&&a.options.rotatable&&(a.imageData.rotate=e%360,a.rotated=!0,a.renderCanvas(!0)),a},scale:function(e,a){var r=this,t=r.imageData,i=!1;return n.isUndefined(a)&&(a=e),e=Number(e),a=Number(a),r.ready&&!r.disabled&&r.options.scalable&&(n.isNumber(e)&&(t.scaleX=e,i=!0),n.isNumber(a)&&(t.scaleY=a,i=!0),i&&r.renderImage(!0)),r},scaleX:function(e){var a=this,r=a.imageData.scaleY;return a.scale(e,n.isNumber(r)?r:1)},scaleY:function(e){var a=this,r=a.imageData.scaleX;return a.scale(n.isNumber(r)?r:1,e)},getData:function(e){var a=this,r=a.options,t=a.imageData,i=a.canvasData,o=a.cropBoxData,d=void 0,l=void 0;return a.ready&&a.cropped?(l={x:o.left-i.left,y:o.top-i.top,width:o.width,height:o.height},d=t.width/t.naturalWidth,n.each(l,function(a,r){a/=d,l[r]=e?Math.round(a):a})):l={x:0,y:0,width:0,height:0},r.rotatable&&(l.rotate=t.rotate||0),r.scalable&&(l.scaleX=t.scaleX||1,l.scaleY=t.scaleY||1),l},setData:function(e){var a=this,r=a.options,t=a.imageData,i=a.canvasData,o={},d=void 0,l=void 0,s=void 0;return n.isFunction(e)&&(e=e.call(a.element)),a.ready&&!a.disabled&&n.isPlainObject(e)&&(r.rotatable&&n.isNumber(e.rotate)&&e.rotate!==t.rotate&&(t.rotate=e.rotate,a.rotated=d=!0),r.scalable&&(n.isNumber(e.scaleX)&&e.scaleX!==t.scaleX&&(t.scaleX=e.scaleX,l=!0),n.isNumber(e.scaleY)&&e.scaleY!==t.scaleY&&(t.scaleY=e.scaleY,l=!0)),d?a.renderCanvas():l&&a.renderImage(),s=t.width/t.naturalWidth,n.isNumber(e.x)&&(o.left=e.x*s+i.left),n.isNumber(e.y)&&(o.top=e.y*s+i.top),n.isNumber(e.width)&&(o.width=e.width*s),n.isNumber(e.height)&&(o.height=e.height*s),a.setCropBoxData(o)),a},getContainerData:function(){var e=this;return e.ready?e.containerData:{}},getImageData:function(){var e=this;return e.loaded?e.imageData:{}},getCanvasData:function(){var e=this,a=e.canvasData,r={};return e.ready&&n.each(["left","top","width","height","naturalWidth","naturalHeight"],function(e){r[e]=a[e]}),r},setCanvasData:function(e){var a=this,r=a.canvasData,t=r.aspectRatio;return n.isFunction(e)&&(e=e.call(a.element)),a.ready&&!a.disabled&&n.isPlainObject(e)&&(n.isNumber(e.left)&&(r.left=e.left),n.isNumber(e.top)&&(r.top=e.top),n.isNumber(e.width)?(r.width=e.width,r.height=e.width/t):n.isNumber(e.height)&&(r.height=e.height,r.width=e.height*t),a.renderCanvas(!0)),a},getCropBoxData:function(){var e=this,a=e.cropBoxData,r=void 0;return e.ready&&e.cropped&&(r={left:a.left,top:a.top,width:a.width,height:a.height}),r||{}},setCropBoxData:function(e){var a=this,r=a.cropBoxData,t=a.options.aspectRatio,i=void 0,o=void 0;return n.isFunction(e)&&(e=e.call(a.element)),a.ready&&a.cropped&&!a.disabled&&n.isPlainObject(e)&&(n.isNumber(e.left)&&(r.left=e.left),n.isNumber(e.top)&&(r.top=e.top),n.isNumber(e.width)&&(i=!0,r.width=e.width),n.isNumber(e.height)&&(o=!0,r.height=e.height),t&&(i?r.height=r.width/t:o&&(r.width=r.height*t)),a.renderCropBox()),a},getCroppedCanvas:function(e){var a=this;if(!a.ready||!window.HTMLCanvasElement)return null;if(!a.cropped)return n.getSourceCanvas(a.image,a.imageData);n.isPlainObject(e)||(e={});var r=a.getData(),t=r.width,o=r.height,d=t/o,l=void 0,s=void 0,c=void 0;n.isPlainObject(e)&&(l=e.width,s=e.height,l?(s=l/d,c=l/t):s&&(l=s*d,c=s/o));var p=Math.floor(l||t),u=Math.floor(s||o),m=n.createElement("canvas"),f=m.getContext("2d");m.width=p,m.height=u,e.fillColor&&(f.fillStyle=e.fillColor,f.fillRect(0,0,p,u));var h=function(){var e=n.getSourceCanvas(a.image,a.imageData),i=e.width,d=e.height,l=a.canvasData,s=[e],p=r.x+l.naturalWidth*(Math.abs(r.scaleX||1)-1)/2,u=r.y+l.naturalHeight*(Math.abs(r.scaleY||1)-1)/2,m=void 0,f=void 0,h=void 0,v=void 0,_=void 0,g=void 0;return-t>=p||p>i?p=m=h=_=0:0>=p?(h=-p,p=0,m=_=Math.min(i,t+p)):i>=p&&(h=0,m=_=Math.min(t,i-p)),0>=m||-o>=u||u>d?u=f=v=g=0:0>=u?(v=-u,u=0,f=g=Math.min(d,o+u)):d>=u&&(v=0,f=g=Math.min(o,d-u)),s.push(Math.floor(p),Math.floor(u),Math.floor(m),Math.floor(f)),c&&(h*=c,v*=c,_*=c,g*=c),_>0&&g>0&&s.push(Math.floor(h),Math.floor(v),Math.floor(_),Math.floor(g)),s}();return f.drawImage.apply(f,i(h)),m},setAspectRatio:function(e){var a=this,r=a.options;return a.disabled||n.isUndefined(e)||(r.aspectRatio=Math.max(0,e)||NaN,a.ready&&(a.initCropBox(),a.cropped&&a.renderCropBox())),a},setDragMode:function(e){var a=this,r=a.options,t=a.dragBox,i=a.face,o=void 0,d=void 0;return a.loaded&&!a.disabled&&(o="crop"===e,d=r.movable&&"move"===e,e=o||d?e:"none",n.setData(t,"action",e),n.toggleClass(t,"cropper-crop",o),n.toggleClass(t,"cropper-move",d),r.cropBoxMovable||(n.setData(i,"action",e),n.toggleClass(i,"cropper-crop",o),n.toggleClass(i,"cropper-move",d))),a}}}])}),function(e){e.fn.bPopup=function(a,r){function t(){switch(v.contentContainer=e(v.contentContainer||A),v.content){case"iframe":var a=e('<iframe class="b-iframe" '+v.iframeAttr+"></iframe>");a.appendTo(v.contentContainer),M=A.outerHeight(!0),Q=A.outerWidth(!0),i(),a.attr("src",v.loadUrl),m(v.loadCallback);break;case"image":i(),e("<img />").load(function(){m(v.loadCallback),d(e(this))}).attr("src",v.loadUrl).hide().appendTo(v.contentContainer);break;default:i(),e('<div class="b-ajax-wrapper"></div>').load(v.loadUrl,v.loadData,function(a,r){m(v.loadCallback,r),d(e(this))}).hide().appendTo(v.contentContainer)}}function i(){v.modal&&e('<div class="b-modal '+_+'"></div>').css({backgroundColor:v.modalColor,position:"fixed",top:0,right:0,bottom:0,left:0,opacity:0,zIndex:v.zIndex+T}).appendTo(v.appendTo).fadeTo(v.speed,v.opacity),f(),A.data("bPopup",v).data("id",_).css({left:"slideIn"==v.transition||"slideBack"==v.transition?"slideBack"==v.transition?P.scrollLeft()+O:-1*(x+Q):p(!(!v.follow[0]&&w||b)),position:v.positionStyle||"absolute",top:"slideDown"==v.transition||"slideUp"==v.transition?"slideUp"==v.transition?P.scrollTop()+D:j+-1*M:u(!(!v.follow[1]&&y||b)),"z-index":v.zIndex+T+1}).each(function(){v.appending&&e(this).appendTo(v.appendTo)}),s(!0)}function o(){return v.modal&&e(".b-modal."+A.data("id")).fadeTo(v.speed,0,function(){e(this).remove()}),v.scrollBar||e("html").css("overflow","auto"),e(".b-modal."+_).off("click"),P.off("keydown."+_),L.off("."+_).data("bPopup",0<L.data("bPopup")-1?L.data("bPopup")-1:null),A.undelegate(".bClose, ."+v.closeClass,"click."+_,o).data("bPopup",null),clearTimeout(R),s(),!1}function n(a){D=L.height(),O=L.width(),g=h(),(g.x||g.y)&&(clearTimeout(C),C=setTimeout(function(){f(),a=a||v.followSpeed;var r={};g.x&&(r.left=v.follow[0]?p(!0):"auto"),g.y&&(r.top=v.follow[1]?u(!0):"auto"),A.dequeue().each(function(){b?e(this).css({left:x,top:j}):e(this).animate(r,a,v.followEasing)})},50))}function d(e){var a=e.width(),r=e.height(),t={};v.contentContainer.css({height:r,width:a}),r>=A.height()&&(t.height=A.height()),a>=A.width()&&(t.width=A.width()),M=A.outerHeight(!0),Q=A.outerWidth(!0),f(),v.contentContainer.css({height:"auto",width:"auto"}),t.left=p(!(!v.follow[0]&&w||b)),t.top=u(!(!v.follow[1]&&y||b)),A.animate(t,250,function(){e.show(),g=h()})}function l(){L.data("bPopup",T),A.delegate(".bClose, ."+v.closeClass,"click."+_,o),v.modalClose&&e(".b-modal."+_).css("cursor","pointer").on("click",o),k||!v.follow[0]&&!v.follow[1]||L.on("scroll."+_,function(){if(g.x||g.y){var e={};g.x&&(e.left=v.follow[0]?p(!b):"auto"),g.y&&(e.top=v.follow[1]?u(!b):"auto"),A.dequeue().animate(e,v.followSpeed,v.followEasing)}}).on("resize."+_,function(){n()}),v.escClose&&P.on("keydown."+_,function(e){27==e.which&&o()})}function s(e){function a(a){A.css({display:"block",opacity:1}).animate(a,v.speed,v.easing,function(){c(e)})}switch(e?v.transition:v.transitionClose||v.transition){case"slideIn":a({left:e?p(!(!v.follow[0]&&w||b)):P.scrollLeft()-(Q||A.outerWidth(!0))-200});break;case"slideBack":a({left:e?p(!(!v.follow[0]&&w||b)):P.scrollLeft()+O+200});break;case"slideDown":a({top:e?u(!(!v.follow[1]&&y||b)):P.scrollTop()-(M||A.outerHeight(!0))-200});break;case"slideUp":a({top:e?u(!(!v.follow[1]&&y||b)):P.scrollTop()+D+200});break;default:A.stop().fadeTo(v.speed,e?1:0,function(){c(e)})}}function c(e){e?(l(),m(r),v.autoClose&&(R=setTimeout(o,v.autoClose))):(A.hide(),m(v.onClose),v.loadUrl&&(v.contentContainer.empty(),A.css({height:"auto",width:"auto"})))}function p(e){return e?x+P.scrollLeft():x}function u(e){return e?j+P.scrollTop():j}function m(a,r){e.isFunction(a)&&a.call(A,r)}function f(){j=y?v.position[1]:Math.max(0,(D-A.outerHeight(!0))/2-v.amsl),x=w?v.position[0]:(O-A.outerWidth(!0))/2,g=h()}function h(){return{x:O>A.outerWidth(!0),y:D>A.outerHeight(!0)}}e.isFunction(a)&&(r=a,a=null);var v=e.extend({},e.fn.bPopup.defaults,a);v.scrollBar||e("html").css("overflow","hidden");var _,g,y,w,b,j,x,M,Q,C,R,A=this,P=e(document),L=e(window),D=L.height(),O=L.width(),k=/OS 6(_\d)+/i.test(navigator.userAgent),T=0;return A.close=function(){o()},A.reposition=function(e){n(e)},A.each(function(){e(this).data("bPopup")||(m(v.onOpen),T=(L.data("bPopup")||0)+1,_="__b-popup"+T+"__",y="auto"!==v.position[1],w="auto"!==v.position[0],b="fixed"===v.positionStyle,M=A.outerHeight(!0),Q=A.outerWidth(!0),v.loadUrl?t():i())})},e.fn.bPopup.defaults={amsl:50,appending:!0,appendTo:"body",autoClose:!1,closeClass:"b-close",content:"ajax",contentContainer:!1,easing:"swing",escClose:!0,follow:[!0,!0],followEasing:"swing",followSpeed:500,iframeAttr:'scrolling="no" frameborder="0"',loadCallback:!1,loadData:!1,loadUrl:!1,modal:!0,modalClose:!0,modalColor:"#000",onClose:!1,onOpen:!1,opacity:.7,position:["auto","auto"],positionStyle:"absolute",scrollBar:!0,speed:250,transition:"fadeIn",transitionClose:!1,zIndex:9997}}(jQuery),jQuery(document).ready(function(){function e(e){for(var a=void 0!=e&&0!=e?e:5,r="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;a>i;i++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}function a(e){var a=e.target,t="";t=void 0===a.files?a&&a.value?[{name:a.value.replace(/^.+\\/,"")}]:[]:a.files,"null"!=t&&"undefined"!=typeof t&&jQuery.each(t,function(e,t){r(t,a)})}function r(a,r){var t=jQuery(r),i=jQuery(r).attr("data-type"),o=jQuery(r).parents(".arm_template_container"),n=(t.attr("class"),t.attr("data-file_size"),new XMLHttpRequest),d=(a.type,a.name.lastIndexOf(".")),l=a.name.substring(d+1);l=l.toLowerCase();var s=t.attr("data-msg-invalid");void 0==s&&(s=invalidFileTypeError);var c=["png","jpg","jpeg","bmp"];if(-1===jQuery.inArray(l,c))return alert(s),t.val(""),!1;if(n.upload){o.css("opacity","0.5");var p=e(6),u=a.name.lastIndexOf("."),m=a.name.substring(u+1),f=/.*(?=\.)/.exec(a.name),h="armCover"+p+"_"+f,v=h.replace(/[^\w\s]/gi,"").replace(/ /g,"")+"."+m,_=new FormData;"cover"===i?_.append("action","arm_upload_cover"):_.append("action","arm_upload_profile"),"cover"===i?n.open("POST",__ARMAJAXURL,!0):"profile"===i&&n.open("POST",__ARMAJAXURL,!0),n.setRequestHeader("X_FILENAME",v),n.setRequestHeader("X-FILENAME",v),_.append("armfileselect",a),n.send(_),n.onreadystatechange=function(){if(4!=n.readyState||200!=n.status)return 200!=n.status&&(o.css("opacity","1"),alert(fileUploadError),t.val("")),!1;var e=n.responseText;if(o.css("opacity","1"),"cover"===i)if(jQuery(window).width()>770){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://")){var a=e.split("://");e="//"+a[1]}if(0!=jQuery("#arm_crop_cover_div").length){jQuery("#arm_crop_cover_div").find("img").attr("src",""),jQuery("#arm_crop_cover_div").find("img").attr("src",e);var r=jQuery("#arm_crop_cover_image"),d=new Cropper(r,{viewMode:4,aspectRatio:2.86875,zoomable:!0,rotatable:!1,dashed:!1,dragMode:"move",cropBoxResizable:!1,background:!1,crop:function(e){jQuery("#arm_crop_cover_image").attr("data-coord",Math.round(e.detail.x)+","+Math.round(e.detail.y)+","+Math.round(e.detail.width)+","+Math.round(e.detail.height))}});document.getElementsByClassName("arm_crop_cover_button")[0].onclick=function(){var a=jQuery("#arm_crop_cover_image").attr("data-coord"),r=jQuery("#arm_crop_cover_image").attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=cover&src="+r+"&cord="+a,success:function(a){jQuery("<img />").attr("src",a+"?"+Math.floor(100*Math.random()+1)),jQuery(".arm_profile_picture_block").css("background-image","url("+a+"?"+Math.floor(100*Math.random())+")"),jQuery("#arm_crop_cover_div_wrapper").bPopup().close(),jQuery("#armRemoveCover").show();var r=e.lastIndexOf("/")+1,t=e.substr(r);jQuery("#armRemoveCover").attr("data-cover",t),jQuery("#arm_crop_cover_image").attr("src",""),d.destroy()}})},document.getElementById("arm_skip_cvr_crop_nav_front").onclick=function(){var a=jQuery("#arm_crop_cover_image").attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=cover&src="+a,success:function(a){jQuery("<img />").attr("src",a+"?"+Math.floor(100*Math.random()+1)),jQuery(".arm_profile_picture_block").css("background-image","url("+a+"?"+Math.floor(100*Math.random())+")"),jQuery("#arm_crop_cover_div_wrapper").bPopup().close(),jQuery("#armRemoveCover").show();var r=e.lastIndexOf("/")+1,t=e.substr(r);jQuery("#armRemoveCover").attr("data-cover",t),jQuery("#arm_crop_cover_image").attr("src",""),d.destroy()}})},jQuery("#arm_crop_cover_div_wrapper").bPopup({opacity:.5,closeClass:"arm_popup_close_btn",follow:[!0,!0],escClose:!1,modalClose:!1,onClose:function(){d.destroy()}})}else jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=cover&src="+e,success:function(a){jQuery("<img />").attr("src",a+"?"+Math.floor(100*Math.random()+1)),jQuery(".arm_profile_picture_block").css("background-image","url("+a+"?"+Math.floor(100*Math.random())+")"),jQuery("#arm_crop_cover_div_wrapper").bPopup().close(),jQuery("#armRemoveCover").show();var r=e.lastIndexOf("/")+1,t=e.substr(r);jQuery("#armRemoveCover").attr("data-cover",t)}})}else{if(jQuery("#arm_crop_cover_div").find("img").remove(),jQuery(".arm_profile_picture_block").css("background-image",""),-1!=e.indexOf("http://")||-1!=e.indexOf("https://")){var a=e.split("://");e="//"+a[1]}jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_update_user_meta&type="+i+"&image_url="+e,dataType:"json",success:function(){}}),jQuery("<img />").attr("src",e+"?"+Math.floor(100*Math.random()+1)),jQuery(".arm_profile_picture_block").css("background-image","url("+e+"?"+Math.floor(100*Math.random())+")"),jQuery("#armRemoveCover").show();var l=e.lastIndexOf("/")+1,s=e.substr(l);jQuery("#armRemoveCover").attr("data-cover",s)}else if("profile"===i){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://")){var a=e.split("://");e="//"+a[1]}if(0!=jQuery("#arm_crop_div").length){jQuery("#arm_crop_div").find("img").attr("src",""),jQuery("#arm_crop_div").find("img").attr("src",e);var c=jQuery("#arm_crop_image"),p=new Cropper(c,{viewMode:4,aspectRatio:1,dragCrop:!1,zoomable:!0,rotatable:!1,dashed:!1,dragMode:"move",cropBoxResizable:!1,crop:function(e){jQuery("#arm_crop_image").attr("data-coord",Math.round(e.detail.x)+","+Math.round(e.detail.y)+","+Math.round(e.detail.width)+","+Math.round(e.detail.height))},background:!1});document.getElementsByClassName("arm_crop_button")[0].onclick=function(){var e=jQuery("#arm_crop_image").attr("data-coord"),a=jQuery("#arm_crop_image").attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=profile&src="+a+"&cord="+e,success:function(e){jQuery(".arm_user_avatar").find("img").remove();var a=jQuery("<img />").attr("src",e+"?"+Math.floor(100*Math.random()+1));jQuery(".arm_user_avatar").append(a),jQuery("#armRemoveProfilePic").parent().show(),jQuery(".arm_user_avatar").find("#armRemoveProfilePic").show();var r=e.split("/"),t=Object.keys(r).length,i=r[t-1];jQuery(".arm_user_avatar").find("#armRemoveProfilePic").attr("data-cover",i),jQuery("#armRemoveProfilePic").parent().removeClass("arm_no_profile"),jQuery("#arm_crop_div_wrapper").bPopup().close(),jQuery("#arm_crop_image").attr("src",""),p.destroy()}})},document.getElementById("arm_skip_avtr_crop_nav_front").onclick=function(){var e=jQuery("#arm_crop_image").attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=profile&src="+e,success:function(e){jQuery(".arm_user_avatar").find("img").remove();var a=jQuery("<img />").attr("src",e+"?"+Math.floor(100*Math.random()+1));jQuery(".arm_user_avatar").append(a),jQuery("#armRemoveProfilePic").parent().show(),jQuery(".arm_user_avatar").find("#armRemoveProfilePic").show();var r=e.split("/"),t=Object.keys(r).length,i=r[t-1];jQuery(".arm_user_avatar").find("#armRemoveProfilePic").attr("data-cover",i),jQuery("#armRemoveProfilePic").parent().removeClass("arm_no_profile"),jQuery("#arm_crop_div_wrapper").bPopup().close(),jQuery("#arm_crop_image").attr("src",""),p.destroy()}})},jQuery("#arm_crop_div_wrapper").bPopup({opacity:.5,closeClass:"arm_popup_close_btn",follow:[!1,!1],escClose:!1,modalClose:!1,onClose:function(){p.destroy()}})}else jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=profile&src="+e,success:function(e){jQuery(".arm_user_avatar").find("img").remove();var a=jQuery("<img />").attr("src",e+"?"+Math.floor(100*Math.random()+1));jQuery(".arm_user_avatar").append(a),jQuery("#armRemoveProfilePic").parent().show(),jQuery(".arm_user_avatar").find("#armRemoveProfilePic").show();var r=e.split("/"),t=Object.keys(r).length,i=r[t-1];jQuery(".arm_user_avatar").find("#armRemoveProfilePic").attr("data-cover",i),jQuery("#armRemoveProfilePic").parent().removeClass("arm_no_profile")}})}}}else alert(fileUploadError),t.val("");return!1}jQuery(".armCoverUpload").each(function(){var e=jQuery(this).attr("id");if(""!=e&&null!=e){var r=document.getElementById(e);r.addEventListener("change",a,!1)}}),jQuery(".armRemoveCover:not(#armRemoveProfilePic)").click(function(){jQuery(".arm_delete_cover_popup").addClass("armopen").slideDown()})}),jQuery(document).on("click","#armRemoveProfilePic",function(){jQuery(".arm_delete_profile_popup").addClass("armopen").slideDown()}),jQuery(document).on("click",".armIEFileUpload_profile",function(){var e=jQuery(this),a=e.attr("data-iframe"),r=jQuery("#"+a+"_iframe");r.contents().find("#armfileselect").click();var t=r.contents().find("#armfileselect").val(),i=e.attr("data-type");if(""!=t&&"undefined"!=typeof t){var o=e.parents(".armFileUploadWrapper"),n=(o.find(".armFileBtn"),o.find(".armFileUploadContainer"),o.find(".armFileRemoveContainer"),o.find(".armFileUploadProgressBar"),o.find(".armFileUploadProgressInfo"),e.attr("data-file_size")),d=1024*n*1024,l=["php","php3","php4","php5","pl","py","jsp","asp","exe","cgi","gif"],s=e.attr("data-msg-invalid");void 0==s&&(s=invalidFileTypeError);var c=t.replace(/C:\\fakepath\\/i,""),p=RandomString(6),u=c.lastIndexOf("."),m=c.substring(u+1),f=/.*(?=\.)/.exec(c),h=e.attr("data-upload-url"),v="armFile"+p+"_"+f,_=v.replace(/[^\w\s]/gi,"").replace(/ /g,"")+"."+m,g=m.toLowerCase(),y=e.attr("accept"),w=[];if(void 0!=y&&(w=y.replace(/\./g,"").split(","),-1===jQuery.inArray(g,w)))return e.val(_),e.attr("value",_),e.trigger("change"),!1;if(-1===jQuery.inArray(g,l))if("cover"===i){r.contents().find("form").attr("action",__ARMAJAXURL+"?action=arm_upload_cover&fname="+_+"&allow_size="+d),r.contents().find("form").submit(),o.find(".armUploadedFileName").val(_);var b=h+"/"+_,j=setInterval(function(){var r=jQuery("#"+a+"_iframe").contents().find(".uploaded").length;if(e.val(_),e.attr("value",_),r>0)if(clearInterval(j),jQuery("#"+a+"_iframe").contents().find(".uploaded").html(),o.find(".armUploadedFileName").val(_),jQuery("#"+a+"_iframe_div").html(" ").append('<iframe id="'+a+'_iframe" src="'+__ARMVIEWURL+'/iframeupload.php"></iframe>'),e.trigger("change"),jQuery(window).width()>770){if(-1!=b.indexOf("http://")||-1!=b.indexOf("https://")){var t=b.split("://");b="//"+t[1]}jQuery("#arm_crop_cover_div").find("img").attr("src",b),jQuery("#arm_crop_cover_div_wrapper").bPopup({opacity:.5,closeClass:"arm_popup_close_btn",follow:[!0,!0],escClose:!1,modalClose:!1,onClose:function(){l.destroy()}});var d=jQuery("#arm_crop_cover_image"),l=new Cropper(d,{viewMode:4,aspectRatio:2.86875,zoomable:!0,rotatable:!1,dashed:!1,dragMode:"move",cropBoxResizable:!1,background:!1,crop:function(e){jQuery("#arm_crop_cover_image").attr("data-coord",Math.round(e.detail.x)+","+Math.round(e.detail.y)+","+Math.round(e.detail.width)+","+Math.round(e.detail.height))}});document.getElementsByClassName("arm_crop_cover_button")[0].onclick=function(){var e=jQuery("#arm_crop_cover_image").attr("data-coord"),a=jQuery("#arm_crop_cover_image").attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=cover&src="+a+"&cord="+e,success:function(e){jQuery("<img />").attr("src",e+"?"+Math.floor(100*Math.random()+1)).on("load",function(){jQuery(".arm_profile_picture_block").css("background-image","url("+e+"?"+Math.floor(100*Math.random())+")")}),jQuery("#arm_crop_cover_div_wrapper").bPopup().close(),jQuery("#armRemoveCover").show(),jQuery("#arm_crop_cover_image").attr("src",""),l.destroy()}})}}else{if(jQuery("#arm_crop_cover_div").find("img").remove(),jQuery(".arm_profile_picture_block").css("background-image",""),-1!=b.indexOf("http://")||-1!=b.indexOf("https://")){var t=b.split("://");b="//"+t[1]}jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_update_user_meta&type="+i+"&image_url="+b,dataType:"json",success:function(){}}),jQuery("<img />").attr("src",b+"?"+Math.floor(100*Math.random()+1)).on("load",function(){jQuery(".arm_profile_picture_block").css("background-image","url("+b+"?"+Math.floor(100*Math.random())+")")}),jQuery("#armRemoveCover").show();var s=b.lastIndexOf("/")+1,c=b.substr(s);jQuery("#armRemoveCover").attr("data-cover",c)}var p=jQuery("#"+a+"_iframe").contents().find(".error_upload").length,u=jQuery("#"+a+"_iframe").contents().find(".error_upload_size").length;if((p>0||u>0)&&(clearInterval(j),p>0&&alert(fileUploadError),u>0)){var m=fileSizeError;m=m.replace("{SIZE}",n+"MB"),m=m.replace("{size}",n+"MB"),alert(m)}},500)}else if("profile"===i){r.contents().find("form").attr("action",__ARMAJAXURL+"?action=arm_upload_profile&fname="+_+"&allow_size="+d),r.contents().find("form").submit(),o.find(".armUploadedFileName").val(_);var b=h+"/"+_,j=setInterval(function(){var r=jQuery("#"+a+"_iframe").contents().find(".uploaded").length;if(e.val(_),e.attr("value",_),r>0)if(clearInterval(j),jQuery("#"+a+"_iframe").contents().find(".uploaded").html(),o.find(".armUploadedFileName").val(_),jQuery("#"+a+"_iframe_div").html(" ").append('<iframe id="'+a+'_iframe" src="'+__ARMVIEWURL+'/iframeupload.php"></iframe>'),e.trigger("change"),jQuery(window).width()>770){if(-1!=b.indexOf("http://")||-1!=b.indexOf("https://")){var t=b.split("://");b="//"+t[1]}jQuery("#arm_crop_div").find("img").attr("src",b);var d=jQuery("#arm_crop_image"),l=new Cropper(d,{viewMode:4,aspectRatio:1,dragCrop:!1,zoomable:!0,rotatable:!1,dashed:!1,dragMode:"move",cropBoxResizable:!1,crop:function(e){jQuery("#arm_crop_image").attr("data-coord",Math.round(e.detail.x)+","+Math.round(e.detail.y)+","+Math.round(e.detail.width)+","+Math.round(e.detail.height))},background:!1});document.getElementsByClassName("arm_crop_button")[0].onclick=function(){var e=jQuery("#arm_crop_image").attr("data-coord"),a=jQuery("#arm_crop_image").attr("src");jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_crop_iamge&type=profile&src="+a+"&cord="+e,success:function(e){jQuery(".arm_user_avatar").find("img").remove();var a=jQuery("<img />").attr("src",e+"?"+Math.floor(100*Math.random()+1));jQuery(".arm_user_avatar").append(a),jQuery("#armRemoveProfilePic").parent().show(),jQuery(".arm_user_avatar").find("#armRemoveProfilePic").show();var r=e.split("/"),t=Object.keys(r).length,i=r[t-1];jQuery(".arm_user_avatar").find("#armRemoveProfilePic").attr("data-cover",i),jQuery("#armRemoveProfilePic").parent().removeClass("arm_no_profile"),jQuery("#arm_crop_div_wrapper").bPopup().close(),jQuery("#arm_crop_image").attr("src",""),l.destroy()}})},jQuery("#arm_crop_div_wrapper").bPopup({opacity:.5,closeClass:"arm_popup_close_btn",follow:[!1,!1],escClose:!1,modalClose:!1,onClose:function(){l.destroy()}})}else{if(jQuery(".arm_user_avatar").find("img").remove(),-1!=b.indexOf("http://")||-1!=b.indexOf("https://")){var t=b.split("://");b="//"+t[1]}jQuery.ajax({type:"POST",url:__ARMAJAXURL,data:"action=arm_update_user_meta&type="+i+"&image_url="+b,dataType:"json",success:function(){}}),jQuery("<img />").attr("src",b+"?"+Math.floor(100*Math.random()+1)).on("load",function(){jQuery(".arm_user_avatar").append(jQuery(this)),jQuery("#armRemoveProfilePic").parent().show(),jQuery(".arm_user_avatar").find("#armRemoveProfilePic").show();var e=e.split("/"),a=Object.keys(e).length,r=e[a-1];jQuery(".arm_user_avatar").find("#armRemoveProfilePic").attr("data-cover",r),jQuery("#armRemoveProfilePic").parent().removeClass("arm_no_profile")})}var s=jQuery("#"+a+"_iframe").contents().find(".error_upload").length,c=jQuery("#"+a+"_iframe").contents().find(".error_upload_size").length;if((s>0||c>0)&&(clearInterval(j),s>0&&alert(fileUploadError),c>0)){var p=fileSizeError;p=p.replace("{SIZE}",n+"MB"),p=p.replace("{size}",n+"MB"),alert(p)}})}}});